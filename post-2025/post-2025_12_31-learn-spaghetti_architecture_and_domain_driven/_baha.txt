[div][size=6][b]ã€å­¸ç¿’ã€‘å±å±±ã€æ¶æ§‹å’Œé ˜åŸŸé©…å‹•[/b][/size][/div]
[div][size=4][b]åå‘å·¥ç¨‹[/b][/size][/div][div]ç‚ºäº†â€¦å’³â€¦æŠ€è¡“ç ”ç©¶ï¼Œæˆ‘ä¹Ÿç”¨ ILSpy åç·¨è­¯äº†æŸå€‹ç«¶å“çš„åŸå§‹ç¢¼ï¼Œç”Ÿæˆè…³æœ¬ç›®éŒ„çµ¦ AI ç ”ç©¶ï¼Œéæ…®å‡ºæˆ‘æ¯”è¼ƒåœ¨æ„çš„è…³æœ¬å’ŒæŠ€è¡“å¯¦ç¾æ–¹å¼ï¼Œä½†ç¦®è²Œèµ·è¦‹é€™è£¡å°±ä¸èªªéŠæˆ²æ˜¯å“ªäº›ï¼Œä¹Ÿä¸æœƒè²¼å‡ºæ‹†å‡ºçš„åŸå§‹ç¢¼å…§å®¹ã€‚[/div]
[div][/div][div][/div][div]ç¸½ä¹‹ï¼Œç¿»äº†åŸå§‹ç¢¼å¾Œæˆ‘æ•´å€‹å¤§å—éœ‡æ’¼ã€‚[/div]
[div][/div][div][/div][div]ç°¡å–®ä¾†èªªå°±æ˜¯æ‰€è¬‚çš„[/div]
[div][/div][div][/div][div][b]â˜†å±å±±â˜†[/b][/div]
[div][/div][div][/div][div]ä¸€åƒäº”ç™¾è¡Œçš„è§’è‰²æ§åˆ¶è…³æœ¬ï¼Œç”¨ switch case åŸ·è¡Œçš„ç‹€æ…‹æ©Ÿè·Ÿåˆ¤æ–·å…¨éƒ¨å¡åœ¨ Update è£¡é¢ï¼Œé€£ Function éƒ½æ²’æ‹†ï¼Œå°±çœŸçš„å…¨å¡åœ¨ä¸€å€‹ void Update() è£¡é¢ï¼Œå…¶ä»–è…³æœ¬ä¹Ÿæ˜¯åŠŸèƒ½æ··é›œï¼Œé•åäº†ç‰©ä»¶å°å‘çš„ä¸çŸ¥é“å¹¾æ¢è¨­è¨ˆåŸå‰‡ã€‚[/div]
[div][/div][div][/div][div]ä½†â€¦[/div]
[div][/div][div][/div][div]é€™æ˜¯ä¸€å€‹å¤§çˆ†æ¬¾çš„ç”¢å“ï¼ŒæŒçºŒæ›´æ–°äº†ä¸€æ®µæ™‚é–“ï¼Œé‚„è·Ÿå…¶ä»–ä½œå“æœ‰éåˆä½œæ´»å‹•ã€‚[/div]
[div][/div][div][/div][div]éŠæˆ²å¾ˆå¥½ç©ï¼Œè²¨çœŸåƒ¹å¯¦ï¼Œæˆ°é¬¥æ‰‹æ„Ÿå¹¾ä¹å¯ä»¥ç•¶æ•™ç§‘æ›¸ï¼Œæ˜¯æˆ‘å€‘ï¼ˆåœ¨æ‰“æ‰é‡ä¾†å‰ï¼‰çš„ç¬¬ä¸€ç«¶å“ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸æœƒç‰¹åˆ¥æ‹†åŸå§‹ç¢¼ä¾†ç ”ç©¶ã€‚[/div]
[div][/div][div][/div][div]è¦èªªçœ‹äº†ç¨‹å¼æœ‰è®“æˆ‘å­¸åˆ°ä»€éº¼å—ï¼Ÿ[/div]
[div][/div][div][/div][div]æœ‰ï¼Œçœ‹åˆ°å„ç¨®å……æ»¿å‰µæ„çš„è§£æ±ºæ–¹æ¡ˆé‚„æ˜¯æ“´å±•äº†çœ¼ç•Œï¼Œä¸éè€å¯¦èªªã€Œé€™ç¨®æ°´æº–ã€çš„ç¨‹å¼æˆ‘å¯èƒ½åœ¨å¤§å­¸å‰å°±æœ‰èƒ½åŠ›åšåˆ°ã€‚[/div]
[div][/div][div][/div][div]æ˜æ˜æœ‰èƒ½åŠ›ï¼Œä½†æˆ‘å»å¹¾ä¹æ²’çœŸçš„ã€Œåšå‡ºã€éä»€éº¼ã€‚[/div]
[div][/div][div][/div][div]å…¥å­¸å‰çš„å·¥ä½œåªåšäº†åŠå¹´ï¼Œç•¶æ™‚èŠ±å¤§æŠŠæ™‚é–“é–‹ç™¼ç”¨ä¸åˆ°çš„æ±è¥¿ï¼Œé‚„æœ‰äºŒå¹´ç´šå¤šé–‹æ”¯ç·šæç ¸äº†çš„ç”¢å­¸æ¡ˆä¹Ÿæ²’æœ‰åšåˆ°æœ€å¾Œã€‚[/div]
[div][/div][div][/div][div]é‚„æœ‰å±±é´‰ä¹Ÿæ˜¯ï¼Œæˆ‘çš„ç¬¬ä¸€å€‹è·Ÿäººåˆä½œçš„å°ˆæ¡ˆï¼Œä¹Ÿæ˜¯ç›®å‰ç‚ºæ­¢å®Œæ•´åº¦æœ€é«˜çš„å°ˆæ¡ˆï¼Œä½†å¾Œä¾†ä¹Ÿé€æ¼¸åœä¸‹äº†ï¼Œå°¤å…¶æ˜¯å¤§å­¸å¾Œï¼Œæˆ‘å¯¦åœ¨æ²’åŠ›æ°£ç¹¼çºŒå¯«é‚£äº›ç¨‹å¼ã€‚[/div]
[div][/div][div][/div][div]ä½†ä»–å€‘æ˜¯ç¢ºå¯¦éƒ½èƒ½é‹ä½œï¼Œå°±åƒç«¶å“ä¸€æ¨£ï¼Œé™¤éæœ‰äººå»æ‹†ä¸ç„¶æ ¹æœ¬çœ‹ä¸å‡ºä¾†ï¼Œç¨‹å¼æ˜¯è—åœ¨éŠæˆ²èƒŒé¢è£¡é¢çš„ï¼Œä¸åƒç¾è¡“ã€éŸ³æ•ˆæˆ–è¨­è¨ˆé€™ç¨®èƒ½ç›´æ¥æ„Ÿå—åˆ°çš„æ±è¥¿ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_9.jpg][/div][/div][div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_6.jpg][/div][/div][/div]
[div][/div][div][/div][div]ç©å®¶ä¸åœ¨ä¹ä½ ç¨‹å¼å¯«çš„æœ‰å¤šå¥½ã€‚[/div]
[div][/div][div][/div][div]æˆ‘ä¹Ÿèƒ½ç†è§£ç‚ºä»€éº¼ç«¶å“çš„è§’è‰²æ§åˆ¶æ˜¯ä¸€å¤§å¨ï¼Œæˆ‘æƒ³é‚£æ˜¯å¾é–‹ç™¼å‰æœŸå°±æœ‰çš„æ±è¥¿ï¼Œåå‘çš„éç¨‹æˆ‘é‚„ç™¼ç¾ä¸€äº›æ­·å²éºç•™çš„å‘½åå•é¡Œã€‚[/div]
[div][/div][div][/div][div]èªªèµ·ä¾†ï¼Œå±±é´‰ä¹Ÿæ˜¯ï¼Œåšåˆ°å¾Œé¢å¾ˆå¤šå‰æœŸçš„è…³æœ¬éƒ½æ²’å†å‹•éäº†ï¼ˆä¹Ÿä¸æ•¢å‹•å°±æ˜¯äº†ï¼‰ï¼Œåƒæ˜¯ä¸»è§’æ§åˆ¶ã€è£å‚™æŠ€èƒ½ä»€éº¼çš„ã€‚[/div]
[div][/div][div][/div][div]ä½†å®ƒå€‘èƒ½é‹ä½œï¼Œè€Œä¸”é‹ä½œè‰¯å¥½ã€‚[/div]
[div][/div][div][/div][div]ç¶­è­·æˆæœ¬ç¢ºå¯¦éœ€è¦è€ƒé‡ï¼Œä½†é€™å…¶ä¸­æœ‰å¤šå°‘åªæ˜¯æˆ‘ä¸æƒ³çœ‹åˆ°é‚£äº›ç³Ÿç³•çš„ç¨‹å¼å‘¢ï¼Ÿ[/div]
[div][/div][div][/div][div]ç¾åœ¨å»æƒ³ä¹Ÿå¾ˆé›£å€åˆ†äº†ï¼Œä½†æˆå› ææ€•ä¹Ÿæ˜¯æŸäº›ç”Ÿé•·ç’°å¢ƒéºç•™çš„å®Œç¾ä¸»ç¾©ä½œç¥Ÿå§ã€‚[/div]
[div][/div][div][/div][div]ç•¢ç«Ÿä¸å®Œæˆå°±ä¸ç”¨é¢å°ç³Ÿç³•çš„çµæœäº†æ˜¯å§ï¼Ÿ[/div]
[div][/div][div][/div][div]ç¸½ä¹‹ï¼Œç ”ç©¶å®Œç«¶å“çš„ç¨‹å¼ï¼ˆåŠ ä¸Šè½åˆ°ä¹æ—¥ç¨‹å¼çš„ TGDF æ¼”è¬›ï¼‰å¾Œï¼Œå°æˆ‘çš„æ€è€ƒç”¢ç”Ÿè »å¤§çš„è¡æ“Šå§ã€‚å¥½éŠæˆ²å°±æ˜¯å¥½éŠæˆ²ï¼Œç©å®¶æ ¹æœ¬ä¸åœ¨ä¹è£¡é¢çš„ç¨‹å¼æ˜¯ä¸æ˜¯å±å±±ã€‚[/div]
[div][/div][div][/div][div][b]é‡é»æ˜¯å®Œæˆï¼Œåœ¨è©•æ–·å¥½å£ä¹‹å‰ï¼Œå…ˆæœ‰å‹‡æ°£å®Œæˆå¯èƒ½æ‰æ˜¯æœ€é‡è¦çš„ã€‚[/b][/div]
[div][/div][div][/div][div]å¾è‡ªå­¸åˆ°ç¾åœ¨ï¼Œæˆ‘çœŸçš„èŠ±å¾ˆå¤šæ™‚é–“åœ¨å †åŸºç¤ã€ç†è«–çŸ¥è­˜ï¼Œåšä¸€å †ç ”ç©¶å’Œå¯¦é©—ç´¯ç©ç¶“é©—ï¼Œå…¶å¯¦å¤ äº†ï¼ŒçœŸçš„å¾ˆå¤ äº†ï¼Œç¾åœ¨æœ€å¤§çš„èƒ½åŠ›ç¼ºå£å°±æ˜¯æŠŠéŠæˆ²å®Œæˆï¼Œå³ä½¿åªæ˜¯ç•¢å°ˆç¨‹åº¦çš„åŸå‹ã€‚[/div]
[div][/div][div][/div][div]åšå®Œæ¯”åšå¥½é‚„é‡è¦ã€‚[/div]
[div][/div][div][/div][div]è¨»ï¼šé€™æ®µå…¶å¯¦æ˜¯ä¹æœˆå°±æœ‰çš„ï¼Œä½†å‰å…©ç¯‡ã€å­¸ç¿’ã€‘æ‰¾ä¸åˆ°åœ°æ–¹æ”¾æ‰€ä»¥æ‹–åˆ°ç¾åœ¨æ‰ç™¼ã€‚[/div]
[div][u][b]â€»åå‘å·¥ç¨‹ 2[/b][/u][/div][div]å‰é™£å­èŠ±è »å¤šæ™‚é–“ç©é´¨ç§‘å¤«ï¼Œå› ç‚ºå¥½å¥‡ä¹Ÿç¨å¾®ç ”ç©¶äº†ä»–å€‘æ modding çš„æ–¹å¼ï¼Œæ‰€ä»¥æ‹†äº†åŸå§‹ç¢¼å’Œå¹¾å€‹ mod ä¾†çœ‹ï¼Œä¹Ÿæ˜¯é–‹äº†ä¸€äº›çœ¼ç•Œã€‚[/div]
[div][/div][div][/div][div]ä»–å€‘çš„æ¥å£å…¶å¯¦ç›¸å°ç°¡å–®ï¼Œæ¨¡çµ„ instance æœƒèµ° Unity çš„ç”Ÿå‘½æµç¨‹ï¼Œæ¯å€‹ mod å»ºç«‹ä¸€å€‹ componentï¼Œç„¶å¾Œæä¾›å¹¾å€‹é—œéµ API å’Œå…¨åŸŸäº‹ä»¶è¨»å†Šï¼Œå…¶ä»–è®“ mod é–‹ç™¼è€…è‡ªç”±ç™¼æ®ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_59.jpg][/div][/div][/div]
[div][/div][div][/div][div]æƒ³èªªç¿»è®Šæ¨¡çµ„ä¹Ÿæ‰¾ä¸åˆ°ä»»ä½•å®šç¾©æª”ã€ç´ æçš„ç—•è·¡ï¼Œå»æ‹†äº†ä¸€å€‹å¢åŠ æ›´å¤šé“å…·çš„ mod æ‰ç™¼ç¾ï¼Œæ¨¡çµ„ç«Ÿç„¶æ˜¯å¾ç¨‹å¼ç¢¼å¯«æ­»è¦æ·»åŠ çš„é“å…·å®šç¾©ï¼Œåœ–ç‰‡ä¹Ÿæ˜¯ç”¨ä¸€ç¨®ç¥å¥‡çš„æ–¹å¼æŠŠç´ æåŒ…é€² dllã€‚[/div]
[div][/div][div][/div][div]è‡³æ–¼é‚£äº›èª‡å¼µçš„ä¿®æ”¹ï¼Œæ”¹è®Šç©æ³•ã€æ”å½±æ©Ÿä¹‹é¡çš„ï¼Œæ¨æ¸¬ä¹Ÿæ˜¯ç”¨[s]Hemary[/s] harmony (é€™ç©æ„åå­çœŸé›£è¨˜) è¦†å¯«çš„ã€‚[/div]
[div][/div][div][/div][div]è‡³æ–¼é‚£äº›æ”¹å‡ºå¤šäººæ¨¡å¼çš„ mod å°±å®Œå…¨è¶…å‡ºæˆ‘çš„èªçŸ¥èƒ½åŠ›äº†ï¼Œé€™å°±æ˜¯ç¤¾ç¾¤çš„åŠ›é‡å—ã€‚[div][div align=center][img=https://media1.tenor.com/m/3eIvVsG3yPYAAAAd/the-universe-tim-and-eric-mind-blown.gif][/div][/div][/div]
[div][size=4][b]æœ‰çš„æ²’çš„[/b][/size][/div]
[div][u]â€» AI æ‘˜è¦[/u][/div][div]ä¸Šä¸Šä¸Šä¸Šå€‹æœˆï¼Ÿï¼ˆé€™æ®µä¹Ÿæ˜¯å¾ˆæ—©å°±æœ‰çš„ï¼‰çš„æ™‚å€™æˆ‘å˜—è©¦ç”¨ Gemini CLI å¹«æˆ‘çš„æ¨¡çµ„ç¨‹å¼ç¢¼å¯«æ‘˜è¦ï¼Œç”¢å‡ºçš„æ±è¥¿ä¹çœ‹ä¹‹ä¸‹é‚„è »ä¸éŒ¯çš„ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_10.jpg][/div][/div][/div]
[div][/div][div][/div][div]ä½†æˆ‘å»æª¢æŸ¥å°±è¶Šçœ‹è¶Šä¸å°å‹ï¼Œå“ªä¾†çš„ IAction å•¦ ==[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_21.jpg][/div][/div][/div]
[div][/div][div][/div][div]ä»–é‚„å¯«äº† Zenject  çš„ä¾è³´æ³¨å…¥ç¯„ä¾‹ï¼Œç•¶ç„¶ä¹Ÿæ˜¯éŒ¯çš„ï¼Œæˆ‘ç”¨çš„æ˜¯è‡ªè£½çš„ç°¡æ˜“æ³¨å…¥ç³»çµ±ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_32.jpg][/div][/div][/div]
[div][/div][div][/div][div]æˆ‘çŒœæ‡‰è©²æ˜¯è¨“ç·´æ™‚å¤§å¤šéƒ½è³‡æ–™éƒ½ç”¨ Zenjectï¼Ÿ[/div]
[div][/div][div][/div][div]ä¸çŸ¥é“å„ä½æœ‰æ²’æœ‰çœ‹åˆ°ä¸€å€‹æ–°èï¼Œå¥½åƒæ˜¯èªª AI ç¶²é è¨­è¨ˆå‡ºçš„é…è‰²éƒ½æœƒåç´«ã€‚[/div]
[div][/div][div][/div][div]å…©å€‹æ‡‰è©²æ˜¯ç›¸ä¼¼çš„åŸç†ï¼Œä¸»æµçš„è¨“ç·´è³‡æ–™æœƒè®“ AI æœ‰ä¸€äº›ã€Œé è¨­ç«‹å ´ã€ï¼Œç„¡è«–æ˜¯é–‹ç™¼æˆ–æ‘˜è¦ï¼ŒAI å¯èƒ½éƒ½æœƒé è¨­æŸäº›æ™®éçš„è§£æ±ºæ–¹æ¡ˆã€‚[/div]
[div][/div][div][/div][div]è‡³æ–¼é€™å€‹ç¾è±¡æœ‰çµ¦æˆ‘å¸¶ä¾†ä»€éº¼å•Ÿç™¼å—ï¼Ÿ[/div]
[div][/div][div][/div][div]ç—¾â€¦æˆ‘ä¸çŸ¥é“ï¼Œåæ­£åŸæœ¬çš„æƒ³æ³•å°±é‚£äº›ï¼Œé«”é©—åˆ°é€™å€‹ç¾è±¡å¥½åƒä¹Ÿæ²’è¦ºå¾—å¤šæ„å¤–ï¼Œåæ­£é™¤éèµ°åˆ°ä»€éº¼å¾ˆå‰æ²¿çš„é ˜åŸŸäº†ï¼Œä¸ç„¶ AI çš„èƒ½åŠ›é‚„æ˜¯æœƒæ¯”æˆ‘å¥½  (Â´ãƒ»Ï‰ãƒ»`)[/div]
[div][/div][div][/div][div]çœŸè¦èªªçš„è©±ï¼Œå¯èƒ½å¯ä»¥åéä¾†æ€è€ƒï¼Ÿå¦‚æœæŠŠè‡ªå·±çš„ Coding ç¿’æ…£å¾€ AI çš„è¨“ç·´è³‡æ–™å°é½Šï¼Œæ˜¯ä¸æ˜¯åè€Œèƒ½æå‡ VibeCoding çš„æ•ˆç‡ï¼Ÿ[/div]
[div][u][b]â€»è‡ªè¨‚ Logger[/b][/u][/div][div]ç¨‹å¼åšåˆ°æŸå€‹ç¨‹åº¦å¾Œå¯èƒ½æœƒé–‹å§‹å»ºè‡ªå·±çš„ Logger ç³»çµ±ï¼Œæˆ‘ä¹Ÿè©¦é N æ¬¡ï¼Œä½†ä¹‹å‰å°±ä¸æ™‚é‡åˆ° Unity Console çš„è·³è½‰å•é¡Œã€‚[/div]
[div][/div][div][/div][div]å°±æ˜¯é»æ“Š Print å‡ºçš„è³‡è¨Šæ¬„ä½æ™‚ï¼ŒIDE æœƒè·³åˆ°è‡ªå·±åŒ…è£ Debug.Log çš„é‚£ä¸€è¡Œï¼Œè€Œä¸æ˜¯çœŸæ­£èª¿ç”¨è‡ªè¨‚ Logger çš„åœ°æ–¹ã€‚[/div]
[div][/div][div][/div][div]é€™å•é¡Œå›°æ“¾æˆ‘è »ä¹…çš„ï¼Œåšå°ˆé¡Œçš„æ™‚å€™åˆç™¼ç”Ÿï¼Œæ‰€ä»¥èŠ±äº†ä¸€äº›æŸ¥è³‡æ–™ï¼Œä¹Ÿå˜—è©¦å• GPT è§£æ±ºæ–¹æ¡ˆï¼Œä¸­é–“ç¹ä¸å°‘è·¯ï¼Œä½†æœ€å¾Œç™¼ç¾é€™ç¯‡ [Hide Method in Stack Trace Log](https://discussions.unity.com/t/hide-method-in-stack-trace-log/704411)ï¼Œå¾€ä¸‹è®€ç™¼ç¾æœ‰äººèªªäº† Unity Console çš„éš±è—æ©Ÿåˆ¶ï¼Ÿ[/div]
[div][/div][div][/div][div]å°±æ˜¯ Console è·³è½‰æ™‚ï¼Œå¦‚æœç›®æ¨™ class çš„åç¨±ä»¥ â€œLogâ€ é–‹é ­æˆ–æ˜¯ä»¥ â€œLoggerâ€ çµå°¾å°±æœƒè¢«å¿½ç•¥ï¼Œé›–ç„¶å®Œæ•´ stack track æœƒé¡¯ç¤ºè‡ªè¨‚ Loggerï¼Œä½†è·³è½‰ç›®æ¨™æœƒæ˜¯å¯¦éš›èª¿ç”¨ logger çš„åœ°æ–¹ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_43.jpg][/div][/div][/div]
[div][/div][div][/div][div]ç„¶å¾Œé€™æ©Ÿåˆ¶å¥½åƒæ²’å¯«åœ¨å®˜æ–¹æ–‡æª”ä¸­ï¼Œåªæœ‰åœ¨æŸå€‹ GDC æˆ–ä»€éº¼å½±ç‰‡ä¸­è¢«æåˆ°==[/div]
[div][/div][div][/div][div]å…¶å¯¦ä¹‹å‰å°±æœ‰æ„Ÿè¦ºè‡ªè¨‚ Logger çš„è·³è½‰ä½ç½®å¥½åƒä¸ä¸€è‡´ï¼Œæ²’æƒ³æœ‰æ¢éš±æ€§è¦å‰‡åœ¨ï¼Œæ‰€ä»¥æœ€å¾ŒæŠŠæˆ‘çš„ LoggerExtensions æ”¹åç‚º LoggerExtensions_Logger å°±å®Œç¾è§£æ±ºäº†ã€‚[/div]
[div][u]â€»AI Agent[/u][/div][div]å¾æš‘å‡é–‹å§‹å¤§é‡å˜—è©¦ AI è¼”åŠ©å’Œ VibeCoding çš„æ–¹å¼ï¼Œæœ€æ—©æ˜¯ VSCode Copilot çš„ AI Suggestionsï¼Œç”¨äº†ä¹‹å¾Œæ•‘å›ä¸å»äº†ã€‚[/div]
[div][/div][div][/div][div]å†ä¾†æ˜¯ ChatGPT çš„å°è©± + è¤‡è£½è²¼ä¸Šï¼Œæˆ‘è¦ºå¾—å°æ–¼åˆæ­¥æ¥è§¸ AI ç¨‹å¼çš„äººä¾†èªªè »é©åˆçš„ï¼Œå› ç‚º GPT çš„å°è©±ä¸²æœƒæœ‰æ¯”è¼ƒå®Œæ•´çš„ä¸Šä¸‹æ–‡ã€Œçµ¦ä½¿ç”¨è€…é–±è®€ã€ï¼Œè€Œä¸”è¤‡è£½çš„éç¨‹æœƒå¼·è¿«ä½ è‡³å°‘å¯©æ ¸ä¸€æ¬¡å…§å®¹ï¼Œæœ‰ä¸ç¬¦åˆéœ€æ±‚çš„å°±ç›´æ¥åæ‡‰ã€‚[/div]
[div][/div][div][/div][div]è€Œç›®å‰æ˜¯åˆ°ä½¿ç”¨ AI Agent ç›´æ¥å¯«å…¥æœ¬åœ°è³‡æ–™å¤¾çš„éšæ®µï¼Œå˜—è©¦çš„å·¥å…·åŒ…æ‹¬ VSCode Copilot Agent, Gemini CLI, Codex CLI, Claudeã€‚[/div]
[div][/div][div][/div][div]ç›®å‰é«”æ„Ÿè©•åƒ¹ï¼ŒVSCode Copilot Agent æ˜¯æ•ˆæœæœ€å·®çš„ï¼ŒContext è®Šé•·å¾Œå¤±æ™ºçˆ†èµ°çš„ç—‡ç‹€æœ€åš´é‡ï¼Œé‚„å¾ˆå¸¸æŠŠè…³æœ¬æ ¼å¼å¼„äº‚ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_54.jpg][/div][/div][/div]
[div][/div][div][/div][div]Gemini CLI å…è²»ä»”ç”¨é‡å°±å…ˆä¸è©•åƒ¹äº†ï¼Œå¾Œä¾†æˆ‘è¨‚é–±äº† Claude Codeï¼Œé«”é©—è »ä¸éŒ¯çš„ï¼Œå¤šäº†å…§å»ºçš„ Plan mode æ•ˆæœå·®å¾ˆå¤šã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_55.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]ä½†æˆ‘åªè¨‚é–±ä¸€å€‹æœˆï¼Œåˆ°æœŸå°±æ²’çºŒäº†ï¼Œä¸æ˜¯å° Claude Code ä¸æ»¿æ„ï¼Œè€Œæ˜¯ GPT Plus å°±è‡ªå¸¶äº†ç›¸ä¼¼åŠŸèƒ½çš„ Codex èƒ½ç”¨ï¼Œä¸æ˜¯é‚£å€‹ç ´ç ´çš„ç·šä¸Šç‰ˆï¼Œè€Œæ˜¯å¯ä»¥å®‰è£åˆ°æœ¬åœ°çš„ [Codex CLI](https://github.com/openai/codex)ï¼Œå¯ä»¥ç›´æ¥ç¶å®š GPT Plus æ–¹æ¡ˆä½¿ç”¨ã€‚[/div]
[div][/div][div][/div][div]codex æˆ‘æ›´æ—©å°±æœ‰äº†ï¼Œåªæ˜¯å‰›é–‹å§‹é‚„æŠ“ä¸åˆ°é€™ç¨®æœ¬åœ° cli ai Agent æ€éº¼ç”¨ï¼Œæ‰€ä»¥å…ˆè·³åˆ° Claudeã€‚ä½†ç”¨ä¸€å€‹æœˆä¸‹ä¾†é–‹å§‹æŠ“åˆ°æ„Ÿè¦ºäº†ï¼Œæ‰€ä»¥è½‰å› codexï¼Œç•¢ç«Ÿæ²’å¿…è¦è¨‚é–±å…©ç¨®ã€‚[/div]
[div][/div][div][/div][div]è‡³æ–¼ Plan Mode çš„éƒ¨åˆ† codex æ²’æœ‰å…§å»º (Why??[/div]
[div][/div][div][/div][div]å¾Œä¾†æˆ‘åœ¨ Codex github çš„ [[b]Feature Request: Add a plan Mode to Codex CLI[/b]](https://github.com/openai/codex/issues/3268)Â çœ‹åˆ°è£¡é¢æœ‰äººåˆ†äº«äº†ä¸€ä»½æè©èƒ½åšåˆ°ç›¸ä¼¼æ•ˆæœã€‚ï¼ˆè²¼æ–‡è£¡é¢æä¾›è‹±æ–‡è·Ÿç°¡ä¸­ç‰ˆï¼‰[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_56.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]å¤šé€™ä»½æè©çš„æ•ˆæœå·®ç•°å·¨å¤§ ! é€™æ¨£ Codex ä¹Ÿæœƒåˆ—å‡ºå¤šå€‹ä»»å‹™é …ç›®ï¼Œæˆ‘å¯ä»¥å…ˆå¯©æ ¸ï¼Œç„¶å¾Œæ±ºå®šè¦è®“ä»–åŸ·è¡Œåˆ°ç¬¬å¹¾éƒ¨ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_57.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]åŸ·è¡Œå®Œç•¢å¾Œé‚„æœƒå¯«ä¸€ä»½ç¸½çµï¼ŒåŒ…æ‹¬ä¿®æ”¹ï¼ˆæˆ–æ²’ä¿®æ”¹ï¼‰çš„éƒ¨åˆ†ã€è¨»è¨˜äº‹é …ã€å»ºè­°çš„ä¸‹ä¸€æ­¥å·¥ä½œã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_58.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]ä½†åªé  prompt ä»–æœ‰æ™‚é‚„æ˜¯æœƒè‡ªå·±åŸ·è¡Œå°±æ˜¯äº†ï¼Œè€Œä¸”æ¯æ¬¡çš„æ•ˆæœä¹Ÿä¸ç©©å®šï¼Œæœ€ä¿éšªé‚„æ˜¯æ¯æ¬¡è®“ Agent æ“ä½œå‰éƒ½å…ˆ commit ä¸€ç‰ˆã€‚[/div]
[div][/div][div][/div][div]æ‰€ä»¥ç‚ºä»€éº¼ codex æ²’æœ‰å…§å»º Plan Mode ???[/div]
[div][/div][div][/div][div]å°ˆé¡Œå¾Œé¢çš„ VibeCoding ä¸»è¦éƒ½æ˜¯é  Codex ï¼Œä½†ä¹Ÿæ˜¯æ‰“æ‰é‡ä¾†å‰çš„äº‹äº†ï¼Œé‡ä¾†ä¹‹å¾Œä¸»è¦é‚„æ˜¯é  GPTã€‚[/div]
[div][size=5][b]Domain Driven (Clean Architecture)[/b][/size][/div][div]æœ¬æ–‡é‡é»ï¼Œç¬¬ä¸€æ¬¡å¯«åˆ°ç›¸é—œå…§å®¹çš„æ–‡æ˜¯é€™ç¯‡ [ã€å­¸ç¿’ã€‘ä¼åŠƒã€çœ¼ç•Œå’Œæš‘å‡è¨ˆåŠƒ](https://home.gamer.com.tw/artwork.php?sn=5959371) æ—¥èªŒï¼Œä¹‹å‰çš„ç­†è¨˜æåˆ°ä¹¾æ·¨æ¶æ§‹æœƒæŠŠç¨‹å¼åˆ†å±¤å››å€‹å±¤ç´šï¼Œæ¯å±¤æœ‰è‡ªå·±çš„è·è²¬å’Œæ¬Šé™ï¼Œä¸¦ä¸”é€é Assembly Definitions é™åˆ¶ä¸åŒå±¤ç´šé–“çš„ä¾è³´é—œä¿‚ï¼Œè®“ç¨‹å¼åªæœ‰å¤–å±¤èƒ½å¾€å†…è¨ªå•ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_11.jpg][/div][/div][/div]
[div][/div][div][/div][div]ç•¶æ™‚å­¸çš„åªæ˜¯æ•´å€‹ DDD çŸ¥è­˜çš„ä¸€å°éƒ¨åˆ†è€Œå·²ï¼ˆåŠ ä¸Šç•¶æ™‚ SOLID åŸºç¤ä¸æ‰å¯¦ï¼‰ï¼Œæ‰€ä»¥çš„å¯¦åšéç¨‹æ²’æœ‰é«”ç¾å‡ºé€™å€‹æ¶æ§‹çš„çœŸæ­£å„ªå‹¢ï¼Œä¹Ÿç•™äº†ä¸å°‘ç–‘æƒ‘åœ¨å¿ƒä¸­ï¼Œç›´åˆ°é€™æ¬¡é‡å­¸æ‰ç®—çœŸçš„è§£ç­”äº†ã€‚[/div]
[div][/div][div][/div][div]å¾Œé¢å°±æ˜¯æˆ‘å¾ä¹æœˆå°ˆé¡Œåˆ°ç¾åœ¨å¯¦åš + AI è³‡æ–™çš„ç†è§£å½™æ•´ã€‚åˆå­¸è¦‹è­˜å°šæ·ºï¼Œå¦‚æœæœ‰ç†è§£éŒ¯èª¤çš„åœ°æ–¹å†éº»ç…©å‰è¼©æŒ‡æ•™ã€‚[/div]
[div][u][b]â€»å‰ç½®çŸ¥è­˜[/b][/u][/div][div]åœ¨å­¸é€™æ±è¥¿å‰ï¼Œå»ºè­°è¦æœ‰å¤ æ‰å¯¦çš„ç‰©ä»¶å°å‘ SOLID çŸ¥è­˜ï¼Œå¯¦åšä¸Šè¦æœ‰èƒ½åŠ›è¾¦æ³•æŠŠç¨‹å¼ç¢¼å€éš”æˆç´” C# çš„ core å’Œ Unity ç›¸é—œéƒ¨åˆ†æœ€å¥½ï¼Œä¸¦ä¸” Unity éƒ¨ä»½çš„ç¨‹å¼ç¢¼å–®å‘ä¾è³´ Coreï¼Œç„¶å¾Œåšæˆæ¨¡çµ„åŒ–æ¶æ§‹ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_12.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]æˆ‘ä¸Šæ¬¡å˜—è©¦å­¸é€™æ±è¥¿æ˜¯ä¸€å¹´åŠå‰çš„æ¨£å­ï¼Œç¸½ä¹‹æ ¹æ“šè‡ªèº«çš„é«”é©—è€Œè¨€ï¼Œé€™æ±è¥¿éå¸¸ï¼éå¸¸ä¸å»ºè­°è¶Šç´šå­¸ã€‚[/div]
[div][/div][div][/div][div]æœ€é–‹å§‹æ˜¯å¾ Clean Code çš„è³‡æ–™æ‰¾åˆ°é€™è£¡çš„ï¼Œä½†ç•¶åˆé€£ SOLID, DI çš„åŸºç¤çŸ¥è­˜éƒ½é‚„æ²’ç†Ÿï¼Œæ‰€ä»¥å¯¦åšä¸Šé‡åˆ°ä¸å°‘å•é¡Œï¼Œæˆ–æ„Ÿè¦ºå¾ˆå¡ã€‚[/div]
[div][/div][div][/div][div]é€™æ¬¡æ˜¯å…ˆè£œé½Šå‰ç½®çŸ¥è­˜æ‰é‡å­¸çš„ï¼Œé›–ç„¶é‚„æœ‰å¡ä½çš„åœ°æ–¹ï¼Œä½†æ•´é«”ä¾†è¬›å¥½å¸æ”¶å¤šäº†ã€‚[/div]
[div][u][b]â€»åƒè€ƒè³‡æ–™[/b][/u][/div][div]é€™æ®µæ™‚é–“ä¸»è¦æ˜¯é å• ChatGPT + ç­†è¨˜ + å¯¦åšï¼Œé‚Šåšé‚Šå­¸ï¼Œæœ‰ AI èƒ½å•å¹«åŠ©çœŸçš„å¾ˆå¤§ï¼Œé‡åˆ°ç–‘é»å¯ä»¥è®“ GPT è§£é‡‹æˆ–çµ¦å‡ºç¯„ä¾‹ã€‚[/div]
[div][/div][div][/div][div]ä½†é‚„æ˜¯è¦æé†’ï¼ŒAI æœ‰æ™‚æœƒçµ¦å‡ºç„¡é—œæˆ–éŒ¯èª¤çš„è³‡è¨Šï¼Œå‰›é–‹å§‹å­¸æˆ‘ä¹Ÿå› ç‚ºä¸€äº›ä¸æº–ç¢ºçš„è§£é‡‹å°è‡´èª¤è§£ï¼Œæ˜¯å¯¦éç¨‹æ„Ÿè¦ºä¸å°åˆå»è¿½å•æ‰é‡æ¸…ï¼Œæœ€å¾Œå†é€éé€™ç¯‡ç­†è¨˜çµ±æ•´ã€‚[/div]
[div][/div][div][/div][div]è¨»ï¼šé‡åˆ°ç–‘æƒ‘è¦é–‹æ–°å°è©±å•ï¼Œä¸ç„¶ Context æ±™æŸ“æœƒå°è‡´ AI èªªå‡ºæœ‰èª¤çš„è§£é‡‹ã€‚[/div]
[div][/div][div][/div][div]å†è¨»ï¼šç›¸åŒå•é¡Œ AI çš„å›ç­”æœ‰æ™‚æœƒä¸ä¸€è‡´ï¼Œåªèƒ½é è‡ªå·±å¯¦åšé‡æ¸…==[/div]
[div][size=4][b]å±¤ç´šé—œä¿‚ Layer[/b][/size][/div][div]æˆ‘ä¸€ç›´ä»¥ç‚º Infrastructure è·Ÿ Presentation éƒ½æ˜¯ä¸Šå±¤ï¼Œå¾Œä¾†æ‰ç™¼ç¾æéŒ¯äº†ï¼ŒåŸºç¤è¨­æ–½æ˜¯ â€œæœ€åº•å±¤â€ï¼Œåªæ˜¯é€éä¾è³´åè½‰ã€æ³¨å…¥é¿å…è¢« Application ç›´æ¥æ¥è§¸è€Œå·²ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_13.jpg][/div][/div][/div]
[div][/div][div][/div][div]è‡³æ–¼å±¤ç´šé–“çš„è¨ªå•æ¬Šé™ï¼Œæˆ‘ä¹‹å‰ä»¥ç‚º Application, Infrastructure, Presentation éƒ½èƒ½è¨ªå• Domain[/div]
[ul]
[li]Presentation > Application, Domain[/li]
[li]Application > Domain[/li]
[li]Domain[/li]
[li]Infrastructure > Application, Domain[/li]
[/ul]
[div][/div][div][/div][div]ä½†æ›´åš´è¬¹æ‡‰è©²æ˜¯é€™æ¨£ï¼Œåªæœ‰ Application èƒ½è¨ªå• Domainï¼Œè€Œ Infrastructure å’Œ Presentation éƒ½åªèƒ½è¨ªå• Applicationã€‚ï¼ˆç¾åœ¨æ‡‚é€™å¼µåœ–çš„å±¤ç´šè·Ÿç®­é ­æ˜¯æœ‰å¯¦éš›æ„ç¾©çš„äº†ï¼‰[/div]
[ul]
[li]Presentation > Application[/li]
[li]Application > Domain[/li]
[li]Domain[/li]
[li]Infrastructure > Application[/li]
[/ul]
[div][/div][div][/div][div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_8.jpg height=350][/div][/div]
[div][/div][div][/div][div]æ¥è‘—é–‹å§‹èªªä¸‹ã€Œç›®å‰ã€å° DDD çš„ç†è§£ï¼Œç¨‹å¼ç¢¼è »æ··é›œçš„ï¼Œæœ‰ç‰¹åˆ¥å¯«çš„ç¯„ä¾‹å’Œç•¢å°ˆçš„æ–°èˆŠæ©Ÿåˆ¶ï¼Œç•¶ç¤ºæ„çœ‹çœ‹å°±å¥½ã€‚[/div]
[div][size=4][b]é ˜åŸŸå±¤ Domain[/b][/size][/div][div]é ˜åŸŸå±¤æ˜¯ç´” C# çš„å±¤ç´šï¼Œå±¬æ–¼ DDD, Clean Architecture æ¶æ§‹ä¸­çš„ã€Œä¸‹å±¤ã€ï¼Œç„¡ä»»ä½•å¤–éƒ¨ä¾è³´ä¹Ÿä¸èƒ½æœ‰å¼•æ“åƒè€ƒçš„æ ¸å¿ƒå±¤ã€‚[/div]
[div][u][b]â€»å…§å®¹[/b][/u][/div][div]Domain å±¤æœƒæœ‰çš„å…§å®¹å¦‚ä¸‹ï¼š[/div]
[ul]
[li][b]Entity (class)[/b][/li]
[/ul]
[div][/div][div][/div][div]æ“æœ‰å”¯ä¸€è­˜åˆ¥æ€§ï¼ˆå³ IDï¼‰çš„[b]ã€Œå¯¦é«” Entityã€[/b]ï¼Œé€éæœƒ ID åˆ¤æ–·å…©å€‹æ±è¥¿æ˜¯å¦ç‚ºåŒä¸€å€‹ç‰©ä»¶ï¼Œå³ä½¿æ”œå¸¶çš„è³‡è¨Šä¸€è‡´ï¼Œåªè¦ ID ä¸åŒå°±æœƒè¦–ä½œå…©å€‹ç¨ç«‹çš„ç‰©ä»¶ã€‚[/div]
[div][/div][div][/div][div]é‹è¡Œéç¨‹ä¸­ç”Ÿæˆçš„å¯¦ä¾‹ instanceï¼Œæ¯å€‹éƒ½æ˜¯ç¨ä¸€ç„¡äºŒçš„ï¼Œåƒæ˜¯è§’è‰²ã€è·æ¥­ã€æŠ€èƒ½ã€é“å…·ã€è£å‚™ã€‚[/div]
[ul]
[li][b]ValueObject (struct, record )[/b][/li]
[/ul]
[div][/div][div][/div][div]ä¸å…·æœ‰è­˜åˆ¥æ€§ï¼Œåªæœ‰æ‰¿è¼‰æ•¸å€¼æˆ–åƒæ•¸çš„å®¹å™¨[b]ã€Œå€¼ç‰©ä»¶ ValueObjectã€[/b]ï¼Œå…§å®¹ä¸€è‡´å°±è¦–ä½œç›¸ç­‰ï¼Œä¸¦ä¸”æ˜¯ã€Œä¸å¯è®Š Immutabilityã€çš„ï¼Œå»ºç«‹å¾Œå°±ä¸æ‡‰è©²è¢«ä¿®æ”¹å…§å®¹ï¼Œåªèƒ½ new æ–°çš„å–ä»£ã€‚[/div]
[div][/div][div][/div][div]å¯èƒ½æ˜¯è§’è‰²çš„å±¬æ€§åƒæ•¸ Stats, æŸå€‹ç³»çµ±çš„é…ç½®åƒæ•¸ Config, æˆ–æ˜¯åŒ…è£ Entity è­˜åˆ¥ ID çš„ structï¼ˆå¯èƒ½æ˜¯ç”¨ GUID, string æˆ– int ä½œç‚º IDï¼‰ã€‚[/div]
[ul]
[li][b]Events (class)[/b][/li]
[/ul]
[div][/div][div][/div][div]ä»£è¡¨é ˜åŸŸå…§ç™¼ç”Ÿçš„æœ‰æ„ç¾©äº‹ä»¶ï¼Œåªæœƒåœ¨é ˜åŸŸé‚Šç•Œï¼ˆBounded Context, BC å¾Œé¢æœƒè§£é‡‹ï¼‰å†…å»£æ’­çš„[b]ã€Œé ˜åŸŸäº‹ä»¶ Domain Eventã€[/b]é¡åˆ¥ã€‚[/div]
[div][/div][div][/div][div]äº‹ä»¶å…§å®¹ä»¥ã€Œä¸å¯è®Š Immutabilityã€è³‡è¨Šå‚³éï¼Œä»¥åŸºæœ¬è®Šæ•¸ int, float, string æˆ–æ˜¯ ValueObject å‚³éäº‹ä»¶è³‡è¨Šï¼Œé¿å…å‚³éæ•´å€‹ Entity åƒè€ƒã€‚[/div]
[ul]
[li][b]Abstraction (interface)[/b][/li]
[/ul]
[div][/div][div][/div][div]é€™æ•´å€‹é ˜åŸŸéœ€è¦çš„æŠ½è±¡æ¥å£ï¼Œä¾‹å¦‚ç”¨ä¾†è¨»å†Šç›£è½ã€ç™¼ä½ˆé ˜åŸŸäº‹ä»¶çš„äº‹ä»¶ç¸½ç·š IEventBus æˆ–æ³›å‹ç´„æŸç”¨çš„ä»‹é¢ IDomainEvent (ä½†æˆ‘æ²’ä»€éº¼ç”¨åˆ°)[/div]
[div][u][b]â€»Aggregate / Aggregate Root[/b][/u][/div][div]Domain å±¤æ¯”è¼ƒé‡è¦çš„å°±æ˜¯ã€Œèšåˆã€ä»¥åŠã€Œèšåˆæ ¹ã€çš„æ¦‚å¿µï¼Œå®šç¾©ä¸Šæ˜¯ã€Œä¸€çµ„å…·ä¸€è‡´æ€§é‚è¼¯çš„ç‰©ä»¶é›†åˆã€ï¼Œç™½è©±è§£é‡‹å°±æ˜¯ Domain ä¸­æŠŠå¤šå€‹ Entity, ValueObject é›†åˆåœ¨ä¸€èµ·çš„æ•´åˆ Entityã€‚[/div]
[div][/div][div][/div][div]ä¾‹å¦‚ï¼Œé€™å€‹ Domain ä¸­å®šç¾©äº† Character, Role, Skill ä¸‰å€‹ Entityï¼Œä»¥åŠ Stats, Level, ID ä¸‰å€‹ ValueObjectï¼Œé‚£ Character å°±æ˜¯åŒ…å«äº† Role, Skill, Stats, Level, ID çš„ã€Œèšåˆã€ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_14.jpg][/div][/div][/div]
[div][/div][div][/div][div]è€Œã€Œèšåˆæ ¹ã€å‰‡ä»£è¡¨é€™å€‹èšåˆæ˜¯æä¾›ä¸Šå±¤ï¼ˆApplicationï¼‰æ“ä½œçš„å…¥å£ï¼Œä»¥ç¯„ä¾‹ä¾†èªªå°±æ˜¯å»ºç«‹è§’è‰²ã€è¨­ç½®è·æ¥­ã€æå‡ç­‰ç´šç­‰ç­‰ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_15.jpg height=350][/div][/div][/div]
[div][u][b]â€»äº‹ä»¶[/b][/u][/div][div]ç•¶é ˜åŸŸä¸­æœ‰æ„ç¾©çš„äº‹ä»¶ç™¼ç”Ÿå¾Œï¼Œæœƒç”±èšåˆæ ¹ã€Œç™¼å‡ºã€äº‹ä»¶ï¼Œæ³¨æ„é€™è£¡åªæ˜¯ç™¼å‡º (Raise) è€Œéç™¼ä½ˆ (Publish) äº‹ä»¶ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_16.jpg][/div][/div][/div]
[div][/div][div][/div][div]é€™æ˜¯ç­†è¨˜æ™‚ç™¼ç¾çš„å·®ç•°ï¼Œä½†æˆ‘ç›®å‰æ²’ä»€éº¼ç”¨åˆ° Domain Eventï¼Œä¸ç¢ºå®šæ˜¯ç›®å‰æƒ…æ³çœŸçš„ç”¨ä¸åˆ°ï¼Œé‚„æ˜¯æˆ‘æéŒ¯ä»€éº¼è§€å¿µğŸ¤”[/div]
[div][size=4][b]æ‡‰ç”¨å±¤ Application[/b][/size][/div][div]æ‡‰ç”¨å±¤ä¹Ÿæ˜¯ç´” C# çš„å±¤ç´šï¼Œå±¬æ–¼ DDD, Clean Architecture æ¶æ§‹ä¸­çš„ã€Œä¸Šå±¤ã€ï¼Œä¸èƒ½æœ‰å¼•æ“åƒè€ƒï¼Œåªèƒ½å¤ ä¾è³´ Domain å±¤ã€‚æ‡‰ç”¨å±¤ Application æ˜¯ç”¨ä¾†çµ¦æ›´ä¸Šå±¤ Presentation æ“ä½œçš„é€²å…¥é»ï¼Œæœƒå®šç¾©éœ€æ±‚æ¥å£è®“åŸºç¤è¨­æ–½å±¤æ³¨å…¥æœå‹™ã€‚[/div]
[div][u][b]â€»å…§å®¹[/b][/u][/div][div]Application å±¤æœƒæœ‰çš„å…§å®¹å¦‚ä¸‹ï¼š[/div]
[ul]
[li]UseCase (class)[/li]
[/ul]
[div][/div][div][/div][div]å®šç¾©ä¸€ç³»åˆ—é€™å€‹é ˜åŸŸä¸­å¯åŸ·è¡Œçš„è¡Œå‹•ï¼Œé¡ä¼¼ Scrum ä¸­çš„ UserStoryï¼Œä¸¦è«„å°‹å–®ä¸€è·è²¬åŸå‰‡ Single Responsibilityï¼Œæ¯å€‹ UserCase åªåšä¸€ä»¶æ˜ç¢ºçš„äº‹ï¼Œä¾‹å¦‚ LevelUpUseCase, ApplyRoleUseCase ã€‚[/div]
[ul]
[li]Ports (interface)[/li]
[/ul]
[div][/div][div][/div][div]é€éæŠ½è±¡çš„ä»‹é¢ interface å®šç¾©ä¸€ç³»åˆ—ã€Œéœ€æ±‚ã€ï¼Œä»£è¡¨ Application ä¸­é ˆè¦ä½†è‡ªå·±ä¸å…·å‚™çš„èƒ½åŠ›ï¼Œå¾—é æ›´é«˜å±¤æ³¨å…¥ã€‚[/div]
[ul]
[li]Data Transfer Object / Dto (struct, record)[/li]
[/ul]
[div][/div][div][/div][div]ç”¨ä¾†å‚³éè³‡è¨Šçš„å°è£ï¼Œæ˜¯é˜²æ­¢æ”¹è®Šçš„å‚³éè³‡æ–™çµæ§‹æ™‚é ˆè¦å‹•åˆ°æ ¸å¿ƒçš„ Domain å±¤ã€‚è·Ÿ ValueObject  ä¸€æ¨£æ˜¯ ã€Œä¸å¯è®Š Immutabilityã€çš„ï¼Œä¸¦ä¸” DTO ä¸çŸ¥é“è‡ªå·±å¾å“ªä¾†ã€è¦å»å“ªï¼Œåªæ˜¯å–®ç´”çš„è³‡è¨Šå‚³éå®¹å™¨ã€‚[/div]
[ul]
[li]Notification / Application Event (class)[/li]
[/ul]
[div][/div][div][/div][div]æ‡‰ç”¨å±¤çš„äº‹ä»¶å»£æ’­ï¼ŒæœƒæŠŠ UseCase çš„åŸ·è¡Œçµæœå»£æ’­çµ¦éœ€è¦çš„äººçŸ¥é“ï¼Œå¦‚ Presentation å±¤çš„ classã€‚[/div]
[ul]
[li]Contracts (interface)[/li]
[/ul]
[div][/div][div][/div][div]å‘å¤–å±¤æä¾›è‡ªå·±çš„æœå‹™ï¼Œå¯èƒ½æ˜¯è®“å°æ–¹ç¹¼æ‰¿çš„ Interface ï¼Œæˆ–æ˜¯è¨ªå•è‡ªèº«æœå‹™çš„æ¥å£ï¼Œåæ­£åˆ¥äººè¦ä½¿ç”¨çš„è©±å°±å¾—æ‰¾è‘—è‡ªå·±å®šç¾©çš„è¦ç¯„ (å¥‘ç´„) ä¾†ã€‚[/div]
[div][u][b]â€»æ‡‰ç”¨æœå‹™ ApplicationService[/b][/u][/div][div]é™¤äº†ä¸Šé¢ä¸‰ç¨®å…§å®¹ä¹‹å¤–ï¼ŒApplication é‚„æœ‰ä¸€å€‹é—œéµçš„ class æ˜¯æ‡‰ç”¨æœå‹™ ApplicationServiceï¼Œä»–æ˜¯é€™å€‹ BC çš„æ“ä½œå…¥å£ã€åªè² è²¬èª¿åº¦å’Œæ’ç¨‹ï¼Œæ¥æ”¶å¤–éƒ¨çš„å·¥ä½œè«‹æ±‚å¾Œé©…å‹• Domain åŸ·è¡Œå…·é«”è¡Œç‚ºï¼Œæœ€å¾ŒæŠŠåŸ·è¡Œçµæœè®Šæˆ DTO å›å‚³çµ¦è«‹æ±‚è€…ï¼ˆå¯é¸ï¼‰ã€‚[/div]
[div][/div][div][/div][div]Usecase å¯ä»¥é€éå»ºæ§‹å­æ³¨å…¥ï¼Œä½†æœ‰æ™‚æˆ‘ä¹Ÿæœƒç›´æ¥æ³¨å…¥ Portï¼Œç„¶å¾Œåœ¨ ApplicationService è£¡é¢ new UseCaseï¼Œä¸ç„¶ UseCase å¤ªå¤šè¦æ³¨å…¥å¾ˆéº»ç…©ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_17.jpg][/div][/div][/div]
[div][u][b]â€»ä¾è³´æ³¨å…¥ã€ä¾è³´åè½‰ Dependency Injection, Inversion[/b][/u][/div][div]åœ¨ UseCase ä¸­å¦‚æœéœ€è¦æŸå€‹åŠŸèƒ½æ˜¯è¶…å‡ºè‡ªèº«èƒ½åŠ›ç¯„åœçš„ï¼Œå°±æœƒé€éå„ç¨® â€œPortâ€ å®šç¾©éœ€æ±‚ï¼Œé€éæŠ½è±¡æ¥å£è¡¨ç¤ºè‡ªå·±ã€Œé ˆè¦ã€ä»€éº¼ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_18.jpg][/div][/div][/div]
[div][/div][div][/div][div]ä¾‹å¦‚ Character çš„å„²å­˜åº«æˆ– Event ç³»çµ±ï¼Œå®šç¾©éœ€æ±‚å¾Œé€éå»ºæ§‹å­æ³¨å…¥çµ¦ UseCaseã€‚UseCase ä¸åœ¨ä¹é€™å€‹ interface æ˜¯èª°æˆ–æ€éº¼å¯¦æ–½çš„ï¼Œåªè¦æœ‰äººæ³¨å…¥çµ¦ä»–å°±å¥½ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_4.jpg][/div][/div][/div]
[div][u][b]â€»ç™¼ä½ˆäº‹ä»¶ Publish[/b][/u][/div][div]åœ¨ Domain éƒ¨åˆ†æœ‰æé Aggregate Root æœƒé ˆè¦ç™¼å‡º (Raise) äº‹ä»¶ï¼Œè‡³æ–¼å¯¦éš›ç™¼ä½ˆ (publish) å°±æ˜¯åœ¨UseCase åŸ·è¡Œå®Œæ“ä½œçš„æ™‚æ©Ÿï¼Œä½† Domain Event é€™éƒ¨åˆ†æˆ‘é‚„æ²’ç”¨åˆ°ï¼Œæ‰€ä»¥å…ˆè·³éã€‚[/div]
[div][/div][div][/div][div]ç›®å‰æ¯”è¼ƒæœ‰ç”¨åˆ°çš„æ˜¯ Application å±¤çš„ Notification, Application Eventï¼Œæœƒåœ¨ UseCase åŸ·è¡Œçš„éç¨‹ä¸­è§¸ç™¼ï¼Œç”¨ä¾†å‘ŠçŸ¥ Presentation å±¤ä»€éº¼äº‹æƒ…åšå®Œäº†ï¼ˆæˆ–æ­£åœ¨åšï¼‰ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_5.jpg][/div][/div][/div]
[div][/div][div][/div][div]ä»‹é¢å°±æ˜¯ç°¡å–®çš„è¨»å†Šã€å–æ¶ˆè¨»å†Šå’Œç™¼ä½ˆäº‹ä»¶è€Œå·²[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_19.jpg][/div][/div][/div]
[div][u][b]â€»å¥‘ç´„ Contract[/b][/u][/div][div]Contract èˆ‡ Port ç®—æ˜¯ç›¸åçš„æ¦‚å¿µï¼ŒPort æ˜¯ç”± Application å®šç¾©èªªæˆ‘ã€Œé ˆè¦ã€ä»€éº¼æ±è¥¿ï¼Œç„¶å¾Œè®“ Infrastructure å¯¦æ–½ã€‚[/div]
[div][/div][div][/div][div]Contract æ˜¯ Application å®šç¾©èªªæˆ‘ã€Œæä¾›ã€å“ªäº›åŠŸèƒ½ï¼Œè€Œ Presentation ï¼ˆæˆ–å…¶ä»– BCï¼‰éœ€è¦çš„è©±å°±ç¹¼æ‰¿å¯¦åšã€æˆ–æ˜¯èª¿ç”¨çµ¦å®šçš„æ¥å£ï¼Œä¾ç…§ Application å®šç¾©çš„è¦ç¯„ (å¥‘ç´„) èµ°ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_20.jpg][/div][/div][/div]
[div][size=4][b]åŸºç¤è¨­æ–½ Infrastructure[/b][/size][/div][div]è² è²¬å¯¦åšæˆ–æŠŠå¤–éƒ¨æœå‹™è½‰æ¥çµ¦ Application çš„åŸºç¤è¨­æ–½å±¤ï¼Œå±¬æ–¼ DDD Clean Architecture æ¶æ§‹ä¸­çš„ã€Œæœ€åº•å±¤ã€ï¼Œç†è«–ä¸Šåªæ¥è§¸ Application Layerã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_22.jpg][/div][/div][/div]
[div][u]â€»Unity åŠŸèƒ½[/u][/div][div]å› ç‚º Application å±¤æ˜¯èˆ‡ Unity éš”é›¢çš„ï¼Œæ‰€ä»¥éœ€è¦ç›¸é—œåŠŸèƒ½çš„æ™‚å€™å°±æŠŠéœ€æ±‚å®šç¾©æˆä¸€å€‹ Portï¼Œç„¶å¾Œé€é Infrastructure å±¤å¯¦åšï¼ŒæŠŠåŠŸèƒ½è½‰æ¥åˆ° Unity ç’°å¢ƒæˆ–æ˜¯èª¿ç”¨ Unity APIï¼Œä¾‹å¦‚ Physics ç›¸é—œåŠŸèƒ½ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_23.jpg][/div][/div][/div]
[div][/div][div][/div][div]ä¸€äº› Infrastructure æˆ‘æœƒç›´æ¥æŠŠåƒæ•¸æš´éœ²åˆ° Inspector ï¼Œèª¿æ•´åƒæ•¸å®¹æ˜“çš„å¤šã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_24.jpg][/div][/div][/div]
[div][u]â€»åè…å±¤[/u][/div][div]å¦‚æœ BC éœ€è¦å…¶ä»– BC çš„æœå‹™  (Unity ã€æ’ä»¶æˆ–å…¶ä»–ç³»çµ±) ï¼Œéƒ½è¦é€éé€™äº› Adapter æŠŠå…¶ä»– BC çš„ Publish Language (å¾Œé¢æ) æˆ–æ˜¯ Contract æ¥å£è½‰æ¥æˆè‡ªå·±çš„ Portã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_25.jpg][/div][/div][/div]
[div][/div][div][/div][div]é€™å€‹ã€Œè½‰æ¥ã€è¡Œç‚ºä¹Ÿç¨±ä½œåè…å±¤ ACL (Anti-Corruption Layer)ï¼Œç”¨ä¾†é¿å…å…¶ä»–ç³»çµ± (BC) æ±™æŸ“è‡ªå·±çš„ç³»çµ± (BC)ï¼Œä¿æŒè‡ªèº«é ˜åŸŸç´”æ·¨ã€‚[/div]
[div][/div][div][/div][div]ä¸Šé¢çš„ç¨‹å¼æ˜¯ç”¨ä¾†è½‰æ¥å°è©±ç³»çµ±çµ¦ Application çš„ï¼Œä½† Application (UseCase) ä¸æœƒç›´æ¥ä½¿ç”¨å¤–éƒ¨çš„ IDialogueSystem æ¥å£ï¼Œè€Œæ˜¯è‡ªå·±é ˜åŸŸå®šç¾©çš„ IConversionPortã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_26.jpg][/div][/div][/div]
[div][/div][div][/div][div]å¦‚æœå°ˆæ¡ˆæ¶æ§‹é¾å¤§ï¼Œæ¶‰åŠä¸åŒé‚è¼¯ã€ä¸åŒåˆ†å·¥ã€ä¸åŒæ’ä»¶çš„æ•´åˆæˆ–æ˜¯ä¸åŒæ™‚æœŸçš„ç¨‹å¼ç¢¼ï¼Œå°ˆæ¡ˆè£¡é¢å¯èƒ½æœƒæœ‰è¦ç¯„ä¸åŒæˆ–æ˜¯æ­·å²éºç•™çš„æ¥å£å®šç¾©å•é¡Œï¼Œä¾‹å¦‚åƒæ•¸å®šç¾©ä¸ä¸€è‡´ã€å‹åˆ¥ä¸ä¸€è‡´ã€ç‰ˆæœ¬ä¸ä¸€è‡´ã€å‘½åè¦ç¯„ä¸ä¸€è‡´ã€æ•¸å­¸é‚è¼¯ä¸ä¸€è‡´ï¼ˆå¦‚åº§æ¨™ç³»ä¸åŒï¼‰[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_27.jpg][/div][/div][/div]
[div][/div][div][/div][div]æ‰€ä»¥ ACL å±¤é‚„æ‰¿æ“”äº†ä¸€ç¨®ã€Œèªæ„è½‰è­¯è€…ã€çš„å·¥ä½œï¼Œè² è²¬æŠŠå¤–éƒ¨ BC çš„è³‡æ–™è½‰æˆå…§éƒ¨ BC å¯ä»¥ç†è§£çš„ç‰©ä»¶ï¼Œè®“æ¯å€‹é ˜åŸŸç¶­æŒè‡ªå·±çš„ç¨ç«‹æ€§ï¼Œä¹Ÿæ˜¯æ¶æ§‹å±¤ç´šçš„è§£è—•é—œéµã€‚[/div]
[div][size=4][b]æ¼”ç¤ºå±¤ Presentation[/b][/size][/div][div]ç”¨ä¾†æ¥æ”¶ä½¿ç”¨è€…è¼¸å…¥ï¼Œä»¥åŠæŠŠè³‡è¨Šå±•æ˜¯çµ¦ä½¿ç”¨è€…çš„æ¼”ç¤ºå±¤ Presentationï¼Œä¹Ÿæ˜¯ç†è«–ä¸Šåªèƒ½æ¥è§¸ Application Layerã€‚[/div]
[div][/div][div][/div][div]åœ¨ Unity é–‹ç™¼ä¸­ï¼ŒPresentation é™¤äº† UI ä¹‹å¤–é‚„åŒ…æ‹¬äº†ç¹¼æ‰¿ MonoBehavior è…³æœ¬çš„ç‰©ä»¶ï¼Œä¾‹å¦‚ç©å®¶åœ¨ Domain ä¸­çš„ Traveller å¯¦ä¾‹æœƒæœ‰å°æ‡‰å‡ºç¾åœ¨å ´æ™¯ä¸Šçš„ MonoTraveller ç‰©ä»¶ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_28.jpg][/div][/div][/div]
[div][/div][div][/div][div]Presentation å±¤æœ‰å…©å€‹åŠŸèƒ½ï¼Œæ¥æ”¶ç©å®¶çš„è¼¸å…¥ï¼Œç„¶å¾Œå‘¼å« Application Service åŸ·è¡Œå°æ‡‰è¡Œç‚ºï¼Œè‡ªèº«åªæœƒåšä¸€äº›åŸºç¤çš„é‚è¼¯åˆ¤æ–·ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_29.jpg][/div][/div][/div]
[div][/div][div][/div][div]è¨»ï¼šç†æƒ³æƒ…æ³æ˜¯æ³¨å…¥å°æ‡‰ UseCase, è€Œä¸æ˜¯æ•´å€‹ Service çµ¦ Mono ç‰©ä»¶èª¿ç”¨[/div]
[div][/div][div][/div][div]ã€Œæ¥æ”¶ç©å®¶çš„è¼¸å…¥ã€ä¹Ÿä¸æ˜¯ç›´æ¥å¯« if Input.GetKeyDownï¼Œè€Œæ˜¯è¦é€éä¸€å€‹ inputService(application, usecase) å–å¾—è¼¸å…¥ç‹€æ…‹çš„å¿«ç…§è³‡è¨Šï¼Œå…·é«”çš„è¼¸å…¥æ–¹æ¡ˆä¹Ÿæ˜¯ç”± Application å®šç¾© Port, ç„¶å¾Œè®“ Infrastructure å¯¦åšæˆ–é€²è¡Œ ACL è½‰æ¥ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_30.jpg][/div][/div][/div]
[div][/div][div][/div][div]Presentation çš„ç¬¬äºŒå€‹åŠŸèƒ½å°±æ˜¯å±•ç¤ºè³‡è¨Šï¼ŒæŠŠ Domain (æ›´æº–ç¢ºèªªæ˜¯ Application æä¾›çš„çš„ Domain å¿«ç…§ DTO ) è³‡è¨Šå±•ç¤ºï¼Œä¾‹å¦‚ä½ç½®ã€ç‹€æ…‹ã€æˆ–æ‰‹ä¸Šæ‹¿è‘—çš„æ±è¥¿ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_31.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]ä½†åœ¨ Domain å’Œ GameObject ä¹‹é–“åŒæ­¥è³‡è¨Šå¾ˆéº»ç…©ï¼Œå°¤å…¶æ˜¯ Transform position, rotation ä¹‹é¡çš„ï¼Œæˆ‘å› ç‚ºé€™å€‹å•é¡Œè¸©äº†ä¸å°‘å‘ã€‚[/div]
[div][/div][div][/div][div]æ¯”è¼ƒå¥½çš„æ–¹å¼æ‡‰è©²æ˜¯ Domain ç›´æ¥å®šç¾©ä¸€å€‹ ITransformï¼Œç„¶å¾Œè½‰æ¥åˆ° Unity Transfom ä¸Šï¼Œè®“ unity çš„ transform æ“ä½œç›´æ¥è·Ÿ domain çš„ transform é›™å‘ç­‰åƒ¹ï¼Œé¿å…è³‡è¨Šæœªæ­£ç¢ºåŒæ­¥é€ æˆçš„ bugã€‚ï¼ˆæˆ–ç›´æ¥é¿å… Domain ä¸­é ˆè¦ Transform é€™ç¨®å³æ™‚è³‡è¨Šï¼‰[/div]
[div][/div][div][/div][div]Presentation æœƒé€éè¨»å†Š Application çš„ Notification äº‹ä»¶ä¾†æ›´æ–°é¡¯ç¤ºè³‡è¨Šã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_33.jpg][/div][/div][/div]
[div][/div][div][/div][div]ä½†é€™è£¡å¾ˆé ­ç—›çš„é»åœ¨æ–¼ Application å±¤ä¸èƒ½æœ‰ unity å¼•ç”¨ï¼Œæ‰€ä»¥äº‹ä»¶ä¹Ÿåªèƒ½å‚³ä¸€å€‹ IDï¼Œå°è‡´äº‹ä»¶æ¥æ”¶æ–¹ (presentation) ä¸çŸ¥é“äº‹ä»¶ç‰©ä»¶ ID å°æ‡‰çš„ unity åƒè€ƒæ˜¯èª°ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_34.jpg][/div][/div][/div]
[div][/div][div][/div][div]æˆ‘ç›®å‰æƒ³åˆ°çš„è§£æ±ºæ–¹æ¡ˆæ˜¯é€éä¸€å€‹åªåœ¨ presentation å±¤å…±ç”¨çš„è¨»å†Šè¡¨ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_35.jpg][/div][/div][/div]
[div][/div][div][/div][div]è®“æ¯å€‹ Mono Instance éƒ½æœƒåœ¨åˆå§‹åŒ–çš„æ™‚å€™ï¼Œå…ˆé€é application è¨»å†Šä¸€å€‹ domain instanceï¼Œç„¶å¾Œç”¨å›å‚³çš„ ID å†æŠŠè‡ªå·±çš„ GameObject è¨»å†Šé€² Unity ç‰©ä»¶çš„è¨»å†Šè¡¨ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_1.jpg][/div][/div][/div]
[div][/div][div][/div][div]é€™æ¨£ Notification äº‹ä»¶è§¸ç™¼çš„æ™‚å€™ï¼ŒPresentation å°±èƒ½æ ¹æ“šäº‹ä»¶å‚³éçš„ ID å–å¾— GameObject ç‰©ä»¶é€²è¡Œæ“ä½œï¼Œä¾‹å¦‚è¨­ç½® parent, position, rotation ä¹‹é¡çš„ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_36.jpg][/div][/div][/div]
[div][/div][div][/div][div]åœ¨å°ˆé¡Œè½‰å‘å¾Œçš„ä¸‹å±¤æ˜¯ç”¨ DDD + DI æ¡†æ¶ï¼Œä½†æœ€ä¸Šå±¤æ“ä½œè·Ÿä¸€èˆ¬çš„ Unity Monobehavior éŠœæ¥è »è‡ªç„¶çš„ï¼Œé—œå¡å’Œå ´æ™¯ç·¨è¼¯éƒ½æ˜¯ Prefab base + çµ„ä»¶åŒ–åŠŸèƒ½ï¼Œè¦ä¿®æ”¹æˆ–é€² PlayMode é™¤éŒ¯éƒ½å¾ˆå¿«ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_37.jpg height=350][/div][/div][/div]
[div][size=4][b]å”èª¿å™¨ã€çµ„åˆå™¨ Orchestrator, Composition[/b][/size][/div][div]æœ€å¾Œæ˜¯ä¸€å€‹å‡Œé§•åœ¨æ‰€æœ‰å±¤ç´šä¹‹ä¸Šçš„çµ„åˆå™¨ï¼Œèƒ½åŒæ™‚è¨ªå•æ‰€æœ‰å±¤ç´šï¼ˆç†æƒ³ä¸Šä¸åŒ…æ‹¬ domainï¼‰ï¼Œè² è²¬å¯¦ä¾‹åŒ– Application Port çš„å°æ‡‰å¯¦æ–½ï¼Œç„¶å¾Œæ³¨å…¥çµ¦ Application å±¤ï¼Œé‚„æœ‰æœç´¢ä¸¦åˆå§‹åŒ– Presentation å¯¦ä¾‹ï¼ˆMono ç‰©ä»¶ã€ UI æˆ–ç‰¹æ•ˆå›é¥‹ç­‰ï¼‰ ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_38.jpg][/div][/div][/div]
[div][/div][div][/div][div]ä¹‹å‰ä»¥ç‚ºé€™å€‹ Orchestrator ä¹Ÿå±¬æ–¼ Infrastructureï¼Œä½†æ€éº¼æƒ³è¨ªå•æ¬Šé™éƒ½ä¸å¤ªå°ï¼Œå¾Œä¾†æ‰ç™¼ç¾å®ƒä¸åœ¨å››å±¤ä¹‹å…§ï¼Œæ˜¯ç¨ç«‹çš„ã€‚[/div]
[div][/div][div][/div][div]æ ¹æ“šç›®å‰å­¸åˆ°çš„æ±è¥¿ï¼Œè¦ä½¿ç”¨ DDD çš„è©±ï¼Œä¸€å€‹ç³»çµ± (BC) å†…çš„è³‡æ–™å¤¾çµæ§‹å’Œå‘½åç©ºé–“æœƒåˆ†æˆé€™äº›å±¤ç´šã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_39.jpg][/div][/div][/div]
[div][/div][div][/div][div]è‡³æ–¼æ•´å¥—æ“ä½œæµç¨‹çœ‹èµ·ä¾†æœƒåƒé€™æ¨£ï¼š[/div]
[div][/div][div][/div][div]1. Presentation çš„ Mono è…³æœ¬æ¥æ”¶ä½¿ç”¨è€…æˆ–ç’°å¢ƒè³‡è¨Šè¼¸å…¥ (å¦‚ OnTriggerEnter) ä¸¦èª¿ç”¨ Application Service (UseCase)[/div]
[div]2. UseCase åŸ·è¡Œå·¥ä½œ[/div]
[div]3. Infrastructure åŸ·è¡Œ UseCase (Port) è«‹æ±‚çš„å¯¦æ–½åŠŸèƒ½[/div]
[div]4. UseCase æŠŠæ“ä½œçµæœå¯«å…¥ Domain å±¤[/div]
[div]5. Domain äº‹ä»¶ç™¼ä½ˆ[/div]
[div]6. UseCase å»£æ’­ Notification äº‹ä»¶[/div]
[div]7. UseCase å›å‚³çµæœçµ¦ Application Service çš„æœ€åˆèª¿ç”¨è™• (æ­¥é©Ÿä¸€çš„åœ°æ–¹)[/div]
[div]8. Presentation æ ¹æ“š UseCase åŸ·è¡Œçµæœå’Œ Notification é€²è¡Œæ¼”ç¤ºï¼ŒUI æ›´æ–°ã€éŸ³æ•ˆç‰¹æ•ˆã€GameObject æ“ä½œç­‰ç­‰[/div]
[div][/div][div][/div][div]å…ˆä¸è«–å…·é«”çš„å¯¦æ–½æ–¹æ¡ˆï¼Œå…‰åŸ·è¡Œæµç¨‹ä¸Šçœ‹èµ·ä¾†å°±éå¸¸çš„æå·¥ï¼Œä½†å„ªé»å°±æ˜¯æ¯å€‹æ­¥é©Ÿçš„è²¬ä»»è·Ÿæ¬Šé™éƒ½å¾ˆæ˜ç¢ºã€‚[/div]
[div][size=5][b]é ˜åŸŸé‚Šç•Œ Bounded Context[/b][/size][/div][div]ä¸Šé¢æ¶æ§‹éƒ½é‚„æ˜¯åœ¨ã€ŒåŒä¸€å€‹ç³»çµ±ã€çš„ç¯„åœå…§ï¼Œå¦‚æœéŠæˆ²è¦æ¨¡æ›´å¤§ï¼Œéœ€è¦æ›´å¤šç³»çµ±çš„è©±ï¼Œå–®é å››å±¤æ¶æ§‹å¯èƒ½é‚„åˆ†çš„ä¸ä¹¾æ·¨ï¼Œæ‰€ä»¥æ›´å¤§çš„æ¶æ§‹ä¸­é‚„æœƒæŠŠç³»çµ±æ‹†æˆä¸åŒçš„é ˜åŸŸé‚Šç•Œ Bounded Context (BC)ï¼Œæ¯å€‹é ˜åŸŸä¸­å†å„è‡ªåˆ†å‡ºå››å€‹å±¤ç´šã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_40.jpg][/div][/div][/div]
[div][u][b]â€»ç™¼ä½ˆèªè¨€[/b] Publish Language[/u][/div][div]ã€Œç†æƒ³ä¸Šã€Application Contract åªç”¨æ–¼ç›¸åŒç³»çµ± (BC) å…§çš„æºé€šï¼Œå¦‚æœè¦æŠŠæœå‹™å…¬é–‹çµ¦å…¶ä»–ç³»çµ± (BC) ä½¿ç”¨ï¼Œæœ€å¥½å¦å¤–å®šç¾©ä¸€ç³»åˆ— â€œPublish Languageâ€ï¼Œä½œç‚ºå°ˆé–€ç”¨ä¾†å°é ˜åŸŸå¤–çš„äº¤äº’çš„å¥‘ç´„ã€‚è¨»ï¼šä½†å°ˆé¡Œä¸­æˆ‘å°±ç›´æ¥å…¬é–‹ Application Contract äº†ã€‚[/div]
[div][/div][div][/div][div]Publish Language ä¸­æœƒå®šç¾© Application æœå‹™çš„å°å¤–æ¥å£ (interface, åŒ…æ‹¬ä½¿ç”¨æœå‹™æˆ–æ˜¯è®“å¤–éƒ¨ BC æ“´å±•æŸäº›åŠŸèƒ½) ã€å°å¤–æºé€šç”¨çš„èªå½™ (Dto) æˆ–æ˜¯æ•´åˆäº‹ä»¶ PublishLanguage (class, å¾Œé¢æ)ã€‚[/div]
[div][/div][div][/div][div]è€Œè¦ä½¿ç”¨æœå‹™çš„ BC å°±æœƒç”¨å®šç¾©éœ€è¦çš„å„ç¨® Port ï¼Œç„¶å¾Œ Infrastructure å¼•ç”¨å¯¦æ–½ï¼Œå†æ³¨å…¥çµ¦è‡ªå·±çš„ Application å±¤ï¼Œé¿å…è‡ªèº« BC å—åˆ°æ±™æŸ“ï¼Œä¹Ÿæ˜¯ä¸Šé¢æåˆ°çš„ Adapter éƒ¨åˆ† (ACL)ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_25.jpg][/div][/div][/div]
[div][/div][div][/div][div]æ›´é€²éšçš„è©± Publish Language é‚„æœƒæœ‰ç‰ˆæœ¬ç®¡ç†ã€å‘ä¸‹å…¼å®¹çš„æ„è­˜åœ¨ï¼Œä½†æ²’å¯¦åšåˆ°å°±å…ˆä¸æäº†ã€‚[/div]
[div][size=4][b]å…±äº«æ ¸å¿ƒ ShareKernel[/b][/size][/div][div]ä½†å°ˆæ¡ˆä¸­ï¼Œä¸åŒ BC å¯èƒ½ç›¸äº’æœ‰é—œè¯ï¼Œå°è‡´å…©å€‹æˆ–å¤šå€‹ BC çš„ Domain æœƒæœ‰å®šç¾©ä¸€è‡´çš„ç‰©ä»¶ï¼Œé€™æ™‚å°±æœƒè€ƒæ…®æŠŠä»–æ”¾åˆ°ã€Œå…±äº«æ ¸å¿ƒ ShareKernelã€ä¸­ã€‚[/div]
[div][/div][div][/div][div]è¦æ³¨æ„çš„æ˜¯ ShareKernel ä¸æ˜¯å–®ç´”ç‚ºäº†ã€Œæ–¹ä¾¿ã€çš„å…±äº«ï¼Œè€Œæ˜¯ã€Œè¦ç¯„ã€ï¼Œå®šç¾©åœ¨é€™ä»£è¡¨æ‰€æœ‰ BC éƒ½å¾—è«„å°‹é€™å€‹ä¸€è‡´èªç¾©ï¼Œä»£è¡¨é€™æ˜¯æ•´å€‹å°ˆæ¡ˆçš„å…±è­˜ï¼Œå®šç¾©ä¸èƒ½è¢«æŸå€‹ BC æ‹’çµ•æˆ–æ›´æ”¹ï¼Œä¿®æ”¹æ™‚é ˆè¦ç¶“éå¤šå€‹ BC åŒæ­¥å”èª¿ã€‚[/div]
[div][/div][div][/div][div]èˆ‰å€‹ä¾‹å­ï¼Œå¦‚æœä½ æŠŠå®Œæ•´çš„ Player å®šç¾©åœ¨ ShareKernel ä¸­ï¼Œä»£è¡¨ Combat å’Œ Inventory  BC ä¸­è«‡åˆ°ï¼ˆä½¿ç”¨ï¼‰â€œPlayerâ€ æ™‚å°±æ˜¯æŒ‡é€™å€‹å®Œæ•´çš„å…±åŒå®šç¾©ï¼Œä¸èƒ½å¤ å„è‡ªåœ¨è‡ªå·±çš„ BC åˆå®šç¾©ä¸€å€‹ Playerã€‚[/div]
[div][/div][div][/div][div]å¦‚æœç„¡æ³•ä¸€è‡´å»ºè­°ç¸®å°å®šç¾©ç¯„åœï¼Œä¾‹å¦‚ç¸®å°åˆ°é€šç”¨çš„ ID ç³»çµ±ï¼Œåƒ PlayerIdï¼Œå…¶ä»–ç´°ç¯€åƒæ•¸å°±ç•™çµ¦å„ BC è‡ªå·±å®šç¾©ã€‚[/div]
[div][size=4][b]å¹³å°è¨­æ–½ Platform[/b][/size][/div][div]é‚„æœ‰å¦ä¸€å€‹ä¸é™æ–¼ä»»ä½• BC å±¤ç´šæ˜¯ã€Œå¹³å°è¨­æ–½ Platformã€ï¼Œå¦‚æœæœ‰ä¸€äº›æœå‹™æœƒè¢«å¤šå€‹ BC çš„ Application (åƒ…æä¾›ä»‹é¢), Infrastructure ä½¿ç”¨ï¼Œå°±å¯ä»¥æŠŠé€™äº›è¢«å¤§é‡é‡ç”¨çš„å¯¦æ–½è½‰ç§»åˆ°å¹³å°è¨­æ–½ã€‚[/div]
[div][/div][div][/div][div]ä¾‹å¦‚ Logging, DI, IO, EventBus, ServiceLocator ä¹‹é¡çš„é€šç”¨ç³»çµ±ï¼Œæœƒè¢«å¹¾ä¹ã€Œæ‰€æœ‰ã€BC ä½¿ç”¨çš„æ¡†æ¶ã€‚[/div]
[div][/div][div][/div][div]ä½†å¦‚æœåªæ˜¯æœƒè¢«å¹¾å€‹ BC é‡ç”¨çš„ç³»çµ±ï¼ˆå¦‚éŸ³æ•ˆã€ç‰¹æ•ˆï¼‰å°±æ²’å¿…è¦è½‰ç§»åˆ° Platform, å¯ä»¥ç¶­æŒåœ¨è‡ªå·±çš„ç¨ç«‹ BCï¼Œè®“å…¶ä»–çœŸçš„æœ‰éœ€æ±‚çš„ BC è‡ªå·±å¼•ç”¨ã€‚[/div]
[div][u][b]â€»å·®ç•°[/b][/u][/div][div]å†è£œå……ä¸€ä¸‹ ShareKernel è·Ÿ Platform çš„å·®ç•°ï¼ŒShareKernel æ›´åŠ ã€Œå°ˆæ¡ˆæ€§ã€ï¼Œæ˜¯é‡å°ç•¶å‰å°ˆæ¡ˆçš„å…±è­˜å®šç¾©ï¼Œä¸¦ä¸”è·Ÿå„ BC æ˜¯é›™å‘ï¼ˆå¤šå‘ï¼‰ä¾è³´ã€‚[/div]
[div][/div][div][/div][div]è€Œ Platform ç†è«–ä¸Šæ˜¯ã€Œéå°ˆæ¡ˆæ€§ã€çš„ï¼Œå—åˆ°å„å€‹ BC çš„å–®å‘ä¾è³´ï¼Œè£¡é¢åªèƒ½æä¾›å–®ç´”ã€é€šç”¨çš„æœå‹™ï¼Œä¸èƒ½ç‰½æ‰¯åˆ°å°ˆå±¬æ–¼é€™å€‹å°ˆæ¡ˆçš„å®šç¾©ï¼ˆå¦‚ IDï¼‰æˆ– GamePlay ç›¸é—œèªå½™ã€‚[/div]
[div][size=4][b]æ•´åˆäº‹ä»¶ Integration Events[/b][/size][/div][div]ç„¡è«–æ˜¯ Domain Event, Application Notification çš„å»£æ’­ç¯„åœéƒ½åªä¾·é™åœ¨è‡ªå·±çš„ BC ä¸­ï¼Œå¦‚æœéœ€è¦é€²è¡Œæ•´å€‹éŠæˆ²çš„å»£æ’­æˆ–ç›£è½ï¼Œè¦å¦å¤–ä½¿ç”¨ä¸€å€‹å…¨åŸŸçš„ã€Œæ•´åˆäº‹ä»¶ Integration Eventsã€ç³»çµ±ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_41.jpg][/div][/div][/div]
[div][/div][div][/div][div]å› ç‚ºæ•´åˆä»¶æ˜¯è·¨ BC çš„ï¼Œæ‰€ä»¥ä¹Ÿæœƒè¢«å®šç¾©åœ¨ Publish Language ä¸­ã€‚åœ¨ã€Œæœ€ç†æƒ³ã€çš„æƒ…æ³ä¸‹ï¼Œæ•´åˆäº‹ä»¶çš„å…§å®¹åªèƒ½ä½¿ç”¨åŸºæœ¬è®Šæ•¸å‹åˆ¥å’Œ ShareKernel ä¸­çš„å…±è­˜ï¼Œæˆ–æ˜¯åŒæ¨£å®šç¾©åœ¨ Publish Language çš„ Dtoã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_42.jpg][/div][/div][/div]
[div][/div][div][/div][div]å¦‚æœæ‡¶å¾—å¼„é‚£éº¼è¤‡é›œï¼Œæ¬Šå®œä¹‹è¨ˆæ˜¯ä½¿ç”¨ BC Application è‡ªèº«çš„ä½¿ç”¨ Dtoï¼Œä½†è¦é•·æœŸç¶­è­·çš„è©±æœ€å¥½å¾ŒçºŒæ›¿æ›æ‰ã€‚[/div]
[div][u]â€»ç™¼ä½ˆ[/u][/div][div]æ•´åˆäº‹ä»¶çš„ç™¼ä½ˆã€Œç†è«–ä¸Šã€åœ¨ BC çš„ Application (UseCase) å±¤ä¸­é€²è¡Œï¼Œè·Ÿ Notification Event çš„æ™‚æ©Ÿä¸€è‡´ã€‚ï¼ˆä½†å°ˆé¡Œä¸­æˆ‘æœ‰ç›´æ¥åœ¨ Presentation, Orchestrator ç™¼ä½ˆäº‹ä»¶ï¼‰[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_44.jpg][/div][/div][/div]
[div][u]â€»è¨‚é–±[/u][/div][div]æœ€è®“æˆ‘é ­ç—›è·Ÿå›°æƒ‘çš„æ˜¯èª°è¦è¨‚é–±äº‹ä»¶ï¼ŸApplication å±¤ä¸èƒ½æœ‰å¤–éƒ¨ä¾è³´ï¼ŒåŒ…æ‹¬å…¶ä»– Application çš„ Publish Languageï¼Œé›–ç„¶å°ˆé¡Œä¸­æœ‰ç›´æ¥åœ¨ Presentation è¨‚é–±ï¼Œä½†æ‡‰è©²ä¹Ÿæ˜¯é•è¦çš„ã€‚[/div]
[div][/div][div][/div][div]æ¯”è¼ƒåˆç†çš„é¸é …æ‡‰è©²æ˜¯ Infrastructure è² è²¬è¨‚é–±ï¼ˆå¯¦åš EventHandlerï¼‰ï¼Œç„¶å¾ŒæŠŠå°æ–¹çš„ Publish Language è½‰æ¥é€²è‡ªå·±çš„ Application æœå‹™ã€‚[/div]
[div][/div][div][/div][div]é€™æ¨£ BC[i]B çš„ Application å°±ä¸æœƒç›´æ¥ä¾è³´åˆ° BC[/i]A çš„ PublishLanguage ï¼Œç”± BC_B Infrastructure ACL åè…å±¤é€²è¡Œè½‰æ¥ã€‚é‚„æ²’å¯¦åšåˆ°ï¼Œä½†æˆ‘ç†è§£ä¸­çš„æµç¨‹æ‡‰è©²æœƒé•·é€™æ¨£ï¼š[/div]
[div][/div][div][/div][div]1. BC_A å¾ Application (UseCase) ç™¼ä½ˆä¸€å€‹ Integration Event[/div]
[div]2. BC_B çš„ Infrastructure æ¥æ”¶åˆ°å»£æ’­[/div]
[div]3. BC_B çš„ Infrastructure æŠŠäº‹ä»¶è½‰æ¥é€²è‡ªå·±çš„ Application (åŸ·è¡Œè©²åšçš„äº‹?[/div]
[div][u]â€»Unity åƒè€ƒ[/u][/div][div]æœ€æœ€æœ€è®“äººé ­ç—›çš„ä¸€æ¨£æ˜¯ Unity åƒè€ƒçš„å‚³éæ–¹å¼ï¼Œå¯èƒ½ä¹Ÿæ˜¯è¦ç”¨ä¸€å€‹å…±ç”¨çš„ Id ç³»çµ±è·Ÿè¨»å†Šè¡¨ï¼Ÿæˆ‘ä¹Ÿé‚„æ²’å¯¦åšåˆ°ï¼Œæ‰€ä»¥é€™è£¡å…ˆç•™ç©ºã€‚[/div]
[div][size=4][b]ç³»çµ±çµ„åˆå™¨ Composition Root, Composer[/b][/size][/div][div]é€™æ¬¡æ˜¯å…¨åŸŸçš„ï¼Œåªè² è²¬ç³»çµ±åˆå§‹åŒ–æ™‚çµ„åˆä¾è³´é—œä¿‚æˆ–å¯¦ä¾‹åŒ–æŸäº›æœå‹™çš„çµ„åˆå™¨ï¼Œä½†ä¸åŒ…å«ã€Œæ¢ä»¶åˆ¤æ–·ã€æˆ–æµç¨‹ç®¡ç†ã€‚[/div]
[div][/div][div][/div][div]å°ˆé¡Œä¸­çš„æ‡‰ç”¨åŒ…æ‹¬å»ºç«‹ DI å®¹å™¨ï¼Œåˆå§‹åŒ–å…¨åŸŸéœæ…‹ (static) çš„ Logger, Time ç³»çµ±ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_7.jpg][/div][/div][/div]
[div][/div][div][/div][div]é‚„æœ‰èª¿ç”¨ä¸€äº›é€šç”¨ BC å’Œ Platform çš„ Installer é€²è¡Œå¯¦ä¾‹åŒ–ã€åˆå§‹åŒ–è·Ÿè¨»å†Šåˆ° DI å®¹å™¨ä¸­ï¼Œåƒæ˜¯æ•´åˆäº‹ä»¶ç¸½ç·š (eventBus)ã€Asset ç³»çµ±ã€Inputç³»çµ±ã€Feedbackç³»çµ±ã€å°è©±ç³»çµ±ã€å ´æ™¯ç³»çµ±ã€æ”å½±æ©Ÿæ§åˆ¶ç­‰ã€Œå…¨å±€å”¯ä¸€ã€çš„ç³»çµ±ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_45.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]é‚„æœ‰é€²è¡Œé€™äº›å…¨åŸŸç³»çµ±çš„ä¾è³´æ³¨å…¥ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_46.jpg][/div][/div][/div]
[div][/div][div][/div][div]å°ˆé¡Œæ˜¯ç”¨å¤šå ´æ™¯ç®¡ç†å„å€‹ç³»çµ±çš„ï¼Œè² è²¬çµ„åˆçš„ GameSystemComposer å ´æ™¯æœƒåœ¨å…¶ä»–å…¨åŸŸç³»çµ±å ´æ™¯éƒ½è¼‰å…¥å®Œå¾Œæ‰è¢«è¼‰å…¥ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_2.jpg][/div][/div][/div]
[div][/div][div][/div][div]ç³»çµ±çµ„åˆå™¨æœ¬èº«ä¸æ¶‰åŠæµç¨‹ç®¡ç†ï¼Œæ‰€ä»¥å ´æ™¯è¼‰å…¥ä¹Ÿç”±å…¶ä»–ç³»çµ±åŸ·è¡Œï¼Œè¼‰å…¥ SystemComposer æ™‚å°±æœƒé è¨­è©²è¼‰å…¥çš„éƒ½å…ˆè¼‰å¥½äº†ï¼Œç›´æ¥é–‹å§‹å…¨åŸŸçµ„åˆçš„å·¥ä½œã€‚[/div]
[div][/div][div][/div][div]Build å¾Œçš„æ­£å¼æµç¨‹æœƒå¾ä¸€å€‹ ApplicationEntry å ´æ™¯é€²å…¥ï¼Œæœƒä¾åºè¼‰å…¥å„ç³»çµ±å ´æ™¯ï¼Œæœ€å¾Œæ‰è¼‰å…¥ç®¡ç†ä¸»æµç¨‹çš„å ´æ™¯ã€‚è€Œåœ¨ Editor ä¸­æœƒç”¨æˆ‘ä¸Šç¯‡[[b]ã€å°ˆé¡Œã€‘æ•´åˆã€åŸå‹å’Œåˆå­¸ DDD](https://home.gamer.com.tw/artwork.php?sn=6234646) è£¡[/b]çš„è‡ªå‹•å ´æ™¯è¼‰å…¥ç³»çµ±ï¼Œèƒ½åœ¨ä»»æ„å ´æ™¯é€²å…¥å®Œæ•´æµç¨‹ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_47.jpg][/div][/div][/div]
[div][size=4][b]å–å¾—åƒè€ƒ[/b][/size][/div][div]æœ€å¾Œå†è£œå……ä¸€ä¸‹æ€éº¼å–å¾—ç‰©ä»¶åƒè€ƒï¼Œé‚„æœ‰å°ˆé¡Œä¸­çš„ä½¿ç”¨æ–¹å¼ï¼Œæˆ‘ç›®å‰çš„æ–¹æ³•æœ‰äº”ç¨®ã€‚[/div]
[div][u]â€» DI å®¹å™¨è‡ªå‹•æ³¨å…¥[/u][/div][div]ç”¨è‡ªè£½æˆ–æ˜¯ç”¨ç¾æˆçš„æ¡†æ¶ (å¦‚ Zenject) çš„ [Inject] Attribute åå°„æ³¨å…¥ï¼Œç”¨åœ¨å„ BC çµ„åˆå™¨ Composition (å”èª¿å™¨ Orchestrator) å–å¾—å…¨åŸŸå”¯ä¸€çš„æœå‹™æ™‚ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_48.jpg][/div][/div][/div]
[div][u]â€» åˆå§‹åŒ–æ³¨å…¥[/u][/div][div]ä½¿ç”¨å»ºæ§‹å­æ³¨å…¥æˆ– function æ³¨å…¥ï¼Œä¸»è¦ç”¨åœ¨å„ BC çš„çµ„åˆå™¨ Composition (å”èª¿å™¨ Orchestrator) å·²ç¶“å–å¾—éœ€è¦çš„åƒè€ƒå¾Œï¼Œå»ºæ§‹å’Œåˆå§‹åŒ–è‡ªèº«çš„ Infrastructure, Presentation è·Ÿ Application æ™‚ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_49.jpg][/div][/div][/div]
[div][u]â€» å–®ä¾‹ã€Service Locator[/u][/div][div]ç›´æ¥ç”¨å–®ä¾‹ä¹Ÿæ˜¯æ–¹æ³•å•¦ï¼Œå¦‚æœçœŸçš„æ‡¶å¾—ç®¡ BC äº¤äº’è¦ç¯„çš„è©±ï¼Œåæ­£å¦ä¸€é‚Šå¯ä»¥ç”¨ Infrastructure ACL æ“‹è€¦åˆï¼Œ[s]ä½†æˆ‘æ²’æœ‰å°±æ˜¯äº† (ã¤Ğ´âŠ‚)[/s][div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_50.jpg][/div][/div][/div]
[div][/div][div][/div][div]å¥½ä¸€é»æ˜¯ç”¨ ServiceLocator Patternï¼Œé€™æ¨£å°±èƒ½è¨»å†Š Interface è€Œéå…¬é–‹å…·é«”å‹åˆ¥ï¼Œä½†æœ¬è³ªè·Ÿå–®ä¾‹æ²’å·®å¤šå°‘ã€‚å°ˆé¡Œä¸­æ²’ç”¨åˆ°ï¼Œå…·é«”å¯ä»¥åƒè€ƒ [GameProgrammingPatterns](https://gameprogrammingpatterns.com/) ä¸€æ›¸çš„å…§å®¹ ([[b]Service Locator](https://gameprogrammingpatterns.com/service-locator.html), [æœåŠ¡å®šä½å™¨](https://gpp.tkchu.me/service-locator.html))ã€‚[/b][/div]
[div][u]â€» Inspector æ³¨å…¥[/u][/div][div]å¦‚æœä¾è³´çš„åƒè€ƒä¸æœƒåœ¨é‹è¡Œéç¨‹è®ŠåŒ–çš„è©±ï¼Œç›´æ¥æš´éœ²æ¬„ä½ç”¨ Inspector æŒ‡å®šä¹Ÿè¡Œï¼Œä¸»è¦ç”¨åœ¨ Presentation Layer çš„ Mono ç‰©ä»¶ï¼Œä»¥åŠ Infrastructure çš„ä¸€äº›é…ç½®ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_51.jpg][/div][/div][/div]
[div][/div][div][/div][div]æˆ‘æ˜¯ç›´æ¥æš´éœ²å…·é«”å‹åˆ¥ï¼Œæƒ³æŒ‡å®šæŠ½è±¡ä¹Ÿå¯ä»¥è‡ªå®š Editor æˆ–ç”¨ [Unity-Serialized-Interface](https://github.com/adammyhre/Unity-Serialized-Interface) ä¹‹é¡çš„æ’ä»¶ã€‚[/div]
[div][/div][div][/div][div][https://www.youtube.com/watch?v=xcGPr04Mgm4&feature=youtu.be](https://www.youtube.com/watch?v=xcGPr04Mgm4&feature=youtu.be)[/div]
[div][u]â€» GetCompoonent[/u][/div][div]æœ€å¾Œï¼Œå¦‚æœ interface çš„ç¹¼æ‰¿è€…æ˜¯ MonoBehavior çš„è©±ï¼Œä¹Ÿèƒ½ç›´æ¥ç”¨ GetCompoonent<> å–å¾—ä»‹é¢çš„åƒè€ƒï¼Œä¸»è¦ç”¨åœ¨é‹è¡Œæ™‚å‹•æ…‹å–å¾— Mono ç‰©ä»¶çš„æŸäº›ä»‹é¢ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_52.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]åƒæœç´¢å‘¨åœçš„å¯äº’å‹•ç‰©ä»¶ä¹‹é¡çš„åŠŸèƒ½ï¼Œé ˆè¦é€é Infrastructure ç”¨ Physics Cast å–å¾—ç‰©ä»¶å¾Œï¼Œå†æŠŠ interface(application contract) å›å‚³çµ¦ UseCaseã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_53.jpg height=350][/div][/div][/div]
[div][/div][div][/div][div]æˆ–æ˜¯å…¨å±€å”¯ä¸€çš„ç‰©ä»¶å°±ç›´æ¥ find + getcomponentï¼Œæˆ‘çš„ GameSystemComposition ä¹Ÿæ˜¯é€™æ¨£è·¨å ´æ™¯æœç´¢å„å€‹ç³»çµ±çš„ã€‚[div][div align=center][img=https://raw.githubusercontent.com/angus945/diary-archive-publish/refs/heads/main/post-2025/post-2025_12_31-learn-spaghetti_architecture_and_domain_driven/image_3.jpg][/div][/div][/div]
[div][size=5][b]å¿ƒå¾—[/b][/size][/div][div]ç•¢å°ˆé–‹å§‹å­¸ DDD åˆ°ç¾åœ¨å¤§æ¦‚ä¸‰å€‹æœˆäº†ï¼Œå¾ä¸æº–ç¢ºçš„è§€å¿µé–‹å§‹å¯¦ä½œï¼Œæ…¢æ…¢ä¿®æ­£åˆ°è‡ªå·±æ„Ÿè¦ºæ¯”è¼ƒåˆç†çš„åšæ³•ï¼Œä¸­é€”çš„ä¸»è¦æ˜¯å• GPT ï¼Œå®ƒè¬›çš„æˆ‘å°±å…ˆå‡è¨­æ˜¯æ­£ç¢ºçš„ï¼Œåæ­£å¦‚æœæœ‰ä»€éº¼éŒ¯èª¤æˆ–èª¤è§£ï¼Œå¾ŒçºŒå¯¦ä½œå°±æœƒæ„Ÿè¦ºå‡ºä¾†äº†ã€‚[/div]
[div][/div][div][/div][div]æƒ³å†æ›´é€²ä¸€æ­¥å¯èƒ½å°±è¦å»ä¸Šèª²äº†ï¼Œä½†ç›®å‰æœƒçš„æ‡‰è©²è »å¤ æˆ‘ç”¨å¥½ä¸€é™£ï¼Œç¨‹å¼èƒ½åŠ›åˆå¾€ä¸Šè·³äº†ä¸€éšã€‚æœ€å¾Œæ¢³ç†ä¸€ä¸‹ç›®å‰æ„Ÿè¦ºåˆ°çš„å„ªé»ï¼Œå’Œä¸€äº›ç–‘æƒ‘é»ã€‚[/div]
[div][size=4][b]å„ªé»[/b][/size][/div][div]æˆ‘è¦ºå¾—ï¼Œç›®å‰å­¸èµ·ä¾†å°æˆ‘ä¾†èªªæœ€å¤§çš„å„ªé»æ˜¯ã€Œæ˜ç¢ºã€å§ï¼ŒDDD æ˜¯ä¸€å€‹è¦ç¯„ç›¸ç•¶æ˜ç¢ºï¼ˆåš´è¬¹ï¼‰çš„æ¶æ§‹ï¼Œé›–ç„¶å¯¦ä½œä¸Šæ›´æå·¥ï¼Œä½†åœ¨æ€è€ƒå’Œè¦åŠƒçš„æ™‚å€™æœ‰é€™éº¼æ˜ç¢ºçš„ä¾å¾ªèƒ½çœå¾ˆå¤šåŠ›ã€‚[/div]
[div][/div][div][/div][div]è€Œä¸”é‡è¦çš„æ˜¯ï¼Œé€™æ˜¯å¯é¸çš„ï¼Œæˆ‘å¯ä»¥åªåœ¨å°ˆæ¡ˆä¸­å¯¦æ–½ä¸€éƒ¨åˆ†ã€‚[/div]
[div][/div][div][/div][div]å¦‚æœæ±ºå®šè®“æŸå€‹ç³»çµ± (BC) æ¡ç”¨æ¶æ§‹ï¼Œå°±ç®—å…¶ä»–åœ°æ–¹é‚„æ˜¯æ··äº‚çš„ï¼Œæ¡ç”¨æ¶æ§‹çš„ BC å…§é‚„æ˜¯æœƒå—åˆ° ACL çš„ä¿è­·ï¼Œè€¦åˆç¶­æŒåœ¨åœ¨ Infrastructure Layer ä¸­ï¼Œè€Œå…¶ä»–ç³»çµ±è¦è¨ªå•ä¹Ÿå¾—ç¶“é Publish Language å®šè£½çš„æ¥å£ã€‚[/div]
[div][/div][div][/div][div]åƒå°ˆé¡Œä¸­æˆ‘å°±æ²’æœ‰å®Œå…¨å¯¦æ–½ï¼Œå› ç‚ºçœŸçš„å¾ˆæå·¥==[/div]
[div][/div][div][/div][div]é‡æ–°é–‹å§‹å¾Œåˆªäº†ä¸å°‘èˆŠç³»çµ±ï¼Œåªæœ‰æ–°æ ¸å¿ƒçš„ç³»çµ±æ˜¯æ¡ç”¨ç­†è¨˜ä¸­æè¿°çš„ DDD ï¼ŒèˆŠçš„ç¶­æŒä¹‹å‰ç†è§£éŒ¯èª¤æ™‚å¯«çš„æ¶æ§‹ï¼Œé‚„æœ‰ä¸€äº›ç°¡å–®æ–°ç³»çµ±çš„ä¹Ÿæ±‚å¿«éš¨ä¾¿å¯«ï¼Œä½†è·¨ç³»çµ±ä¹‹é–“çš„äº¤äº’é‚„æ˜¯ç›¡é‡éµå®ˆè¦ç¯„ (èµ° publish language æˆ– application contract)ã€‚[/div]
[div][/div][div][/div][div]é‚„æœ‰å°±æ˜¯ DDD æ¶æ§‹ä¸‹è¦è·Ÿç¾æˆæ’ä»¶ä¸²æ¥ä¹Ÿæ›´é©åˆï¼Œå› ç‚ºå¤šäº† Infrastructure ACL ä¿è­·ï¼Œç•¶ç„¶ä¹Ÿæ›´é©åˆåšæˆæ¨¡çµ„åŒ–æ¶æ§‹ã€‚[/div]
[div][/div][div][/div][div]å°ˆé¡Œçš„æ–°æ–¹å‘ç”¨ AI Agent (Codex) æ¯”è¼ƒå°‘ï¼Œç•¢ç«Ÿé‚„åœ¨å­¸æ–°æ¶æ§‹ï¼Œä½†æˆ‘æƒ³å¦‚æœæœ‰é€™éº¼æ˜ç¢ºçš„æ¶æ§‹ï¼ŒAI çˆ†èµ°çš„æ©Ÿç‡æ‡‰è©²æœƒæ¯”è¼ƒä½ï¼Ÿèª°çŸ¥é“å‘¢ï¼Œä½†è‡³å°‘ä¸²æ¥ç¾æˆè³‡æºä»€éº¼çš„æ‡‰è©²æœƒè¼•é¬†å¾ˆå¤šï¼Œæœ‰è¨‚å¥½ Port ä¹Ÿæ¯”è¼ƒä¸æ€• AI å¤ªéš¨æ©Ÿçš„è¡¨ç¾ã€‚[/div]
[div][/div][div][/div][div]æœ€å¾Œå°±æ˜¯ä¸€éƒ¨åˆ†çš„é™¤éŒ¯å¾ˆå¥½å®šä½ï¼Œå› ç‚ºæ¯å€‹ UseCase, Port éƒ½åªè² è²¬å–®ä¸€å·¥ä½œï¼Œä½†èˆ‡å…¶èªªæ˜¯ DDD å„ªé»ï¼Œä¸å¦‚èªªæ˜¯ SOLID çš„ (single responsibility principle) æœ¬èº«çš„æ„ç¾©ã€‚[/div]
[div][size=4][b]ç–‘æƒ‘é»[/b][/size][/div][div]åŸæœ¬æƒ³èªªç¼ºé»ï¼Œä½†ç”¨ã€Œç–‘æƒ‘é»ã€å¥½åƒæ›´æº–ç¢ºï¼Œç¸½ä¹‹å°±æ˜¯ç›®å‰é‡åˆ°çš„ä¸€äº›æœªè§£æˆ–é›£é¡Œã€‚[/div]
[div][u]â€»Unity åƒè€ƒ[/u][/div][div]ä¸»è¦æ˜¯è·¨ BC ä¹‹é–“å‚³é Unity åƒè€ƒå¾ˆéº»ç…©ï¼Œå› ç‚º Application, Publish Language ä¸èƒ½æœ‰å¼•æ“åƒè€ƒçš„è®Šæ•¸ï¼Œä½†æœ‰æ™‚åˆæœƒé ˆè¦æ˜ç¢ºåƒè€ƒï¼Œåƒæ˜¯ Transform, Cameraã€‚[/div]
[div][/div][div][/div][div]å°ˆé¡Œæ²’æœ‰å¯¦æ–½åˆ°ï¼Œä½†æˆ‘ç›®å‰æƒ³åˆ°çš„æ–¹æ¡ˆæ˜¯åœ¨ ShareKernel æˆ– Publish Language å®šç¾©ä¸€å¥—å°å¤–ç”¨çš„ ID ç³»çµ±ï¼Œå…¶ä»– BC å¯ä»¥ç”¨é€™å€‹ Id ä»£è¡¨æŸå€‹ç‰©ä»¶ï¼Œè€Œè‡ªå·± BC å†é€é Id æŸ¥ç‰©ä»¶è¨»å†Šè¡¨å–å¾— Unity åƒè€ƒã€‚[/div]
[div][/div][div][/div][div]æˆ–æ˜¯ä¹¾è„†å¿½è¦–é€™æ¢è¦ç¯„ï¼ŒçœŸçš„éœ€è¦å°±ç›´æ¥å‚³åƒè€ƒ Â¯\[i](ãƒ„)[/i]/Â¯[/div]
[div][u]â€»Unity è³‡è¨ŠåŒæ­¥[/u][/div][div]Presentation é‚£æ®µæœ‰æåˆ°ï¼Œåœ¨ Presentation(Unity) è·Ÿ domain ä¹‹é–“åŒæ­¥æŸäº›ã€Œé«˜é »ä¸”å³æ™‚çš„ã€è³‡è¨Šå¾ˆéº»ç…©ï¼Œåƒæ˜¯ Transformï¼Œå› ç‚ºå„ç¨®åŸ·è¡Œé †åºã€ç”Ÿå‘½é€±æœŸçš„å•é¡Œï¼ŒUpdate, FixedUpdate, LateUpdate ä¹‹é¡çš„éƒ½æœƒå½±éŸ¿ã€‚[/div]
[div][/div][div][/div][div]é‚„æœƒæœ‰å„ªå…ˆæ¬Šä¹‹é¡çš„å•é¡Œï¼Œposition è¦ä»¥ domain ä¸­çš„è³‡è¨Šå„ªå…ˆï¼Ÿé‚„æ˜¯å¯¦éš› unity ç’°å¢ƒçš„ï¼Ÿå¦‚æœæ¡ç”¨ unity çš„ç‰©ç†æ¡†æ¶å‘¢ï¼ŸTransform.Position, Rigidbody.Position åœ¨æ¯å¹€ä¸­ä¹Ÿæœ‰äº›å¾®å·®ç•°ã€‚[/div]
[div][/div][div][/div][div]ç›®å‰è©•ä¼°ï¼ˆå’Œå¯¦éš›è¸©é›·ï¼‰ä¸‹ä¾†ï¼Œå¯èƒ½ç›´æ¥é¿å… domain ä¸­é ˆè¦å„²å­˜é€™ç¨®è³‡è¨Šæœƒæ›´å¥½ï¼Ÿ[/div]
[div][/div][div][/div][div]å¦‚æœä»€éº¼è¨ˆç®—çœŸçš„éœ€è¦çš„è©±ï¼Œå°±è®“ Presentation å±¤ç›´æ¥å‚³ç•¶ä¸‹çš„æ•¸å€¼é€²å»ï¼Œç®—å®Œå¾ŒæŠŠçµæœåå›ä¸Šå±¤ï¼ŒDomain, Application ä¸æŒæœ‰é€™äº›è³‡è¨Šã€‚[/div]
[div][u]â€»Unity ä¸­ Domain é™¤éŒ¯ä¸æ–¹ä¾¿[/u][/div][div]ç•¢ç«Ÿ Domain æ˜¯è—åœ¨ BC ä¸‹å±¤çš„ç´” C# å±¤ï¼Œã€Œæ­£å¸¸æƒ…æ³ä¸‹ã€æ²’è¾¦æ³•å¾ Inspector çœ‹åˆ°å³æ™‚ç‹€æ…‹ï¼Œé™¤éåœ¨ Application å¤šå¯«ä¸€äº›é™¤éŒ¯ç”¨çš„å¿«ç…§ Dto æ‰èƒ½æš´éœ²åˆ° Presentation æŸ¥çœ‹ã€‚[/div]
[div][/div][div][/div][div]æˆ–æ˜¯ä¹Ÿå¿½è¦–é€™æ¢è¦ç¯„ï¼Œç›´æ¥æš´éœ² Domain åˆ°æŸäº› Debug å°ˆç”¨çš„ Presentation Â¯\[i](ãƒ„)[/i]/Â¯[/div]
[div][u]â€»å¯èƒ½ï¼Ÿå°æ¨¡çµ„é–‹ç™¼ä¸å‹å¥½[/u][/div][div]ä¸æ˜¯æŒ‡ DDD æ¶æ§‹æœ¬èº«ï¼Œè€Œæ˜¯ç”¨ Assembly Definition åˆ†å‰²ç¨‹å¼é›†å’Œæ§åˆ¶ä¾è³´é—œä¿‚çš„æ–¹å¼ï¼Œå› ç‚º Assembly Definition æœƒæŠŠç¨‹å¼ç·¨è­¯æˆå¤šåˆ† dll ï¼Œå°æ–¼æ¯”è¼ƒæ¿€é€²çš„ mod é–‹ç™¼æ‰‹æ®µ (å¦‚ harmony) æ¯”è¼ƒéº»ç…©ï¼Œç’°å¢ƒè¨­ç½®è¦å¼•ç”¨ä¸€å † dll æ‰èƒ½çœ‹åˆ°å®Œæ•´åŸå§‹ç¢¼ã€‚[/div]
[div][/div][div][/div][div]æˆ–æ˜¯â€¦â€¦ä¹Ÿå¿½è¦–é€™æ¢è¦ç¯„ï¼Œå°ˆé¡Œé‡ä¾†å¾Œæˆ‘ä¹Ÿæ²’ç‰¹åˆ¥ç”¨ Assembly Definition åˆ†å‰² BC è·Ÿå„ Layerï¼Œå°±æ˜¯é€é namespace å‘½å + è‡ªå·±æ³¨æ„è€Œå·²[/div]
[div][/div][div][/div][div]ç•¢ç«Ÿè¨­ç½®èµ·ä¾†å¤ªéº»ç…©äº†ï¼Œè€Œä¸”æœƒå°æ­»æˆ‘é‘½æ¼æ´çš„æ‰‹æ®µ Â¯\[i](ãƒ„)[/i]/Â¯[/div]
[div][u]â€»è¨­è¨ˆæ¨¡å¼[/u][/div][div]æœ€å¾Œå°±æ˜¯ä¸€äº›è¨­è¨ˆæ¨¡å¼ä¸Šçš„å•é¡Œï¼Œä¸€äº›å¸¸è¦‹è¨­è¨ˆæ¨¡å¼è¦æ€éº¼è·Ÿ DDD æ•´åˆï¼Ÿåƒç‹€æ…‹æ©Ÿï¼Ÿç›®å‰é‚„æ²’é ­ç·’ï¼Œä½†ä¸€æ¨£â€¦çœŸçš„æƒ³ä¸å‡ºä¾†å°±å¿½ç•¥è¦ç¯„å§ï¼Œè©²ç”¨å°±ç›´æ¥ç”¨ï¼Œåæ­£åƒå‰é¢èªªçš„ï¼Œé€™äº›éƒ½æ˜¯å¯é¸çš„ã€‚[/div]
[div][/div][div][/div][div]å¤§æ¦‚å°±é€™æ¨£å§[/div]
[div][/div][div][/div][div]é€™ç¯‡ç®—æ˜¯å°ˆé¡ŒæœŸé–“çš„ DDD ç¨‹å¼å­¸ç¿’ç­†è¨˜ï¼Œå¾ˆå¤šå¯¦ä½œéç¨‹çš„ç´°ç¯€æ²’è¾¦æ³•ä¸€ä¸€åˆ—èˆ‰ï¼Œä½†æˆ‘ç›¡é‡æŠŠè‡ªå·±è¦ºå¾—é‡è¦çš„é»éƒ½æ‘˜è¦å‡ºä¾†äº†ï¼Œç•¶åšåˆ†äº«è·Ÿç´€éŒ„ï¼Œä¸€å¦‚å¾€å¸¸ï¼Œå¦‚æœ‰èª¤è§£çš„åœ°æ–¹å†éº»ç…©å‰è¼©å€‘æé»ã€‚[/div]
[div][/div][div][/div][div]å°ˆé¡Œæ–¹é¢ï¼Œæ–°æ–¹å‘è©²æœ‰çš„åŠŸèƒ½éƒ½å¯«å·®ä¸å¤šäº†ï¼ŒäºŒå¯©å¾Œä¸»è¦éƒ½æ˜¯é›¶ç¢çš„æ•´åˆã€ä¿® Bug å’Œ Unity é—œå¡ç·¨è¼¯ã€‚[/div]
[div][/div][div][/div][div]Shader å’Œå…¶ä»–é›¶ç¢çš„æ±è¥¿æœƒå†ç­‰ä¸‹ä¸€ç¯‡ã€å­¸ç¿’ã€‘ï¼Œä½†ä¸ç¢ºå®šåˆ°æ™‚æˆ‘é‚„è¨˜å¾—å¤šå°‘ï¼ŒäºŒå¯©å¿ƒå¾—æœƒç­‰ä¸‹å€‹æœˆã€ç”Ÿæ´»ã€‘å†å¯«ï¼Œç¸½ä¹‹è©•å¯©è€å¸«å€‘çµ¦çš„è©•åƒ¹éƒ½è »ä¸éŒ¯çš„ :)[/div]
[div][/div][div][/div][div]ç©æ³•ç´°ç¯€ã€äºŒå¯©å ±å‘Šå…§å®¹ (é€å­—ç¨¿) ç›¸é—œçš„æ–‡å°±å…ˆä¸ç™¼äº†ï¼Œå› ç‚ºä¹‹å¾Œé ˆè¦ç™½ç´™æ¸¬è©¦ï¼Œæœƒæ‰¾ä¸€äº›äººã€å‰è¼©è©¦ç©ï¼Œæˆ‘æƒ³ç¢ºä¿å¯èƒ½æ‰¾çš„å°è±¡å°éŠæˆ²æ²’æœ‰ä»»ä½•æ¦‚å¿µï¼Œé€™æ¨£æ‰èƒ½çŸ¥é“å¼•å°è¨­è¨ˆæœ‰æ²’æœ‰å•é¡Œã€‚[/div]
[div][/div][div][/div][div]å°±é†¬[/div]
[div][/div][div][/div][div]åˆä¸€å¹´éå»äº† :)[/div]